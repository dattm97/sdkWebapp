(this.webpackJsonppaymesdk=this.webpackJsonppaymesdk||[]).push([[65,106],{137:function(e,t,n){"use strict";n.d(t,"a",(function(){return r})),n.d(t,"b",(function(){return c})),n.d(t,"c",(function(){return i}));var a=n(12),r={NONE:"NONE",EXPIRED_DATE:"EXPIRED_DATE",ISSUE_DATE:"ISSUE_DATE"},c={NONE:a.a.InputCardDate,EXPIRED_DATE:a.a.InputCardExpiredDate,ISSUE_DATE:a.a.InputCardDate},i={NONE:a.a.IssueDate,EXPIRED_DATE:a.a.Expired,ISSUE_DATE:a.a.IssueDateCard}},313:function(e,t,n){"use strict";var a=n(10),r=n(0),c=n.n(r),i=n(34),l=n.n(i),o=n(11),u=n(12),s=n(39),d={isEmpty:l.a};t.a=function(e){var t,n,i=e.cardNumber,l=e.cardHolder,f=e.cardDate,v=e.swiftCode,m=void 0===v?"":v,b=e.cardNumberLength,p=void 0===b?16:b,g=e.isShowName,E=void 0!==g&&g,O=e.dateText,k=void 0===O?u.a.Expired:O,j=Object(r.useState)(!1),N=Object(a.a)(j,2),h=N[0],y=N[1],C=function(){var e;return h?c.a.createElement("img",{className:"ImgBGBank",src:null!==(e=Object(s.a)(m).iconLarge)&&void 0!==e?e:o.b.bgBigCardNull,alt:""}):c.a.createElement("img",{className:"ImgBGBank",src:o.b.bgBigCardNull,alt:""})};return E?c.a.createElement("div",{className:"FormBankLarge font-regular"},c.a.createElement("div",{className:"LayoutCard"},C(),c.a.createElement("p",{className:"TxtCardNumberLarge".concat(16===p?16:19," font-semibold")},i),c.a.createElement("div",{className:"TxtCardHolder"},l||""),!d.isEmpty(f)&&c.a.createElement("div",{className:"TxtDate Visa"},k),!d.isEmpty(f)&&c.a.createElement("div",{className:"TxtCardDate"},f),c.a.createElement("img",{style:{height:0,width:0},src:null!==(n=Object(s.a)(m).iconLarge)&&void 0!==n?n:o.b.bgBigCardNull,onLoad:function(){return y(!0)},alt:""}))):c.a.createElement("div",{className:"FormBankLarge font-regular"},c.a.createElement("div",{className:"LayoutCard"},C(),c.a.createElement("p",{className:"TxtCardNumberLarge".concat(16===p?16:19," font-semibold")},i),c.a.createElement("div",{style:{position:"absolute",right:10,bottom:"10%",display:"flex",flexDirection:"row"}},!d.isEmpty(f)&&c.a.createElement("p",{style:{flex:1,fontSize:10,textTransform:"uppercase",color:"#ffffff"}},k),c.a.createElement("p",{style:{flex:2,fontSize:21,display:"flex",alignItems:"center",justifyContent:"flex-end",color:"#ffffff"}},!d.isEmpty(f)&&f)),c.a.createElement("img",{style:{height:0,width:0},src:null!==(t=Object(s.a)(m).iconLarge)&&void 0!==t?t:o.b.bgBigCardNull,onLoad:function(){return y(!0)},alt:""})))}},34:function(e,t,n){var a=n(89),r=n(90),c=n(82),i=n(51),l=n(68),o=n(83),u=n(85),s=n(84),d=Object.prototype.hasOwnProperty;e.exports=function(e){if(null==e)return!0;if(l(e)&&(i(e)||"string"==typeof e||"function"==typeof e.splice||o(e)||s(e)||c(e)))return!e.length;var t=r(e);if("[object Map]"==t||"[object Set]"==t)return!e.size;if(u(e))return!a(e).length;for(var n in e)if(d.call(e,n))return!1;return!0}},39:function(e,t,n){"use strict";function a(e){return{iconSmall:"https://static.payme.vn/image_bank/smallBackgroundBank/smallBg".concat(e,"@2x.png"),iconLarge:"https://static.payme.vn/image_bank/largeBackgroundBank/largeBg".concat(e,"@2x.png"),iconBank:"https://static.payme.vn/image_bank/icon_banks/icon".concat(e,"@2x.png"),iconMethod:"https://static.payme.vn/image_bank/image_method/method".concat(e,"@2x.png")}}n.d(t,"a",(function(){return a}))},55:function(e,t,n){"use strict";var a=n(0),r=n.n(a);function c(e,t){if(null==e)return{};var n,a,r={},c=Object.keys(e);for(a=0;a<c.length;a++)n=c[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}var i=["focus","autoFocus"],l=Object(a.forwardRef)((function(e,t){var n=e.focus,l=e.autoFocus,o=c(e,i),u=Object(a.useRef)(null),s=function(e){var t=Object(a.useRef)();return Object(a.useEffect)((function(){t.current=e}),[e]),t.current}(!!n);return Object(a.useImperativeHandle)(t,(function(){return{blur:function(){u.current&&u.current.blur()}}}),[t]),Object(a.useLayoutEffect)((function(){u.current&&(n&&l&&u.current.focus(),n&&l&&n!==s&&(u.current.focus(),u.current.select()))}),[l,n,s]),r.a.createElement("input",Object.assign({id:"input",ref:u},o))})),o=Object(a.memo)(l),u=["length","isNumberInput","autoFocus","disabled","onChangeOTP","inputClassName","inputStyle"],s=Object(a.forwardRef)((function(e,t){var n=e.length,i=e.isNumberInput,l=e.autoFocus,s=e.disabled,d=e.onChangeOTP,f=e.inputClassName,v=e.inputStyle,m=c(e,u),b=Object(a.useState)(0),p=b[0],g=b[1],E=Object(a.useState)(Array(n).fill("")),O=E[0],k=E[1],j=Object(a.useRef)(null);Object(a.useImperativeHandle)(t,(function(){return{clear:function(){var e=[].concat(O);k(e.fill("")),j.current&&j.current.blur()},blur:function(){j.current&&j.current.blur()}}}),[t]);var N=Object(a.useCallback)((function(e){var t=e.join("");d(t)}),[d]),h=Object(a.useCallback)((function(e){var t=e;return i?!t||/\d/.test(t)?t:"":t}),[i]),y=Object(a.useCallback)((function(e){var t=[].concat(O);t[p]=e[0]||"",k(t),N(t)}),[p,N,O]),C=Object(a.useCallback)((function(e){var t=Math.max(Math.min(n-1,e),0);g(t)}),[n]),D=Object(a.useCallback)((function(){C(p-1)}),[p,C]),I=Object(a.useCallback)((function(){C(p+1)}),[p,C]),x=Object(a.useCallback)((function(e){return function(){C(e)}}),[C]),L=Object(a.useCallback)((function(e){var t=h(e.currentTarget.value);t?(y(t),I()):e.preventDefault()}),[y,I,h]),T=Object(a.useCallback)((function(){g(-1)}),[]),S=Object(a.useCallback)((function(e){switch(e.key||e.keyCode){case"Backspace":case"Delete":case 229:case 8:e.preventDefault(),O[p]?y(""):D();break;case"ArrowLeft":case 37:e.preventDefault(),D();break;case"ArrowRight":case 39:e.preventDefault(),I();break;case" ":case 32:e.preventDefault()}}),[p,y,I,D,O]),B=Object(a.useCallback)((function(e){e.preventDefault();var t=e.clipboardData.getData("text/plain").trim().slice(0,n-p).split("");if(t){var a=0,r=[].concat(O);r.forEach((function(e,n){if(n>=p){var c=h(t.shift()||e);c&&(r[n]=c,a=n)}})),k(r),g(Math.min(a+1,n-1)),N(r)}}),[p,h,n,O]);return r.a.createElement("div",Object.assign({},m),Array(n).fill("").map((function(e,t){return r.a.createElement(o,{ref:j,key:"SingleInput-"+t,focus:p===t,value:O&&O[t],autoFocus:l,onFocus:x(t),onChange:L,onKeyDown:S,onBlur:T,onPaste:B,onWheel:T,inputMode:i?"numeric":"text",type:i?"tel":"text",pattern:i?"[0-9]*":"^[a-zA-Z0-9]+$",autoComplete:"off",autoCorrect:"off",style:v,className:f,disabled:s})})))})),d=Object(a.memo)(s);t.a=d},60:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n(10),r=n(0),c=n.n(r),i=function(e){var t=Object(r.useState)(0),n=Object(a.a)(t,2),i=n[0],l=n[1],o=Object(r.useState)(0),u=Object(a.a)(o,2),s=u[0],d=u[1],f=Object(r.useState)(0),v=Object(a.a)(f,2),m=v[0],b=v[1],p=Object(r.useState)(0),g=Object(a.a)(p,2),E=g[0],O=g[1],k=Object(r.useRef)(null),j=e.expired,N=e.onExpired,h=e.renderer;return Object(r.useEffect)((function(){return function(e){if(""!==e&&0!==e){var t=new Date(e).getTime();k.current=setInterval((function(){var e=(new Date).getTime(),n=t-e;if(n<0||Number.isNaN(n))clearInterval(k.current),N&&N();else{var a=Math.floor(n/864e5),r=Math.floor(n%864e5/36e5),c=Math.floor(n%36e5/6e4),i=Math.floor(n%6e4/1e3);l(a),d(r),b(c),O(i)}}),1e3)}}(j),function(){clearInterval(k.current)}}),[j]),h?h({days:i,hours:s,minutes:m,seconds:E}):c.a.createElement("p",{style:{fontSize:"16px",textAlign:"center"}},i>0?"".concat(i):null,s>0?"".concat(s,":"):null,m>0?"".concat(m,":"):"00:",E>0?"".concat(E):"0")}},871:function(e,t,n){"use strict";n.r(t);var a=n(10),r=n(0),c=n.n(r),i=n(75),l=n(9),o=n(18),u=n(55),s=n(45),d=n(313),f=n(60),v=n(41),m=n(52),b=n(137),p="ACTIVE",g="RESEND";t.default=function(){var e,t,n=Object(i.useHistory)(),E=Object(i.useLocation)(),O=null===E||void 0===E||null===(e=E.state)||void 0===e?void 0:e.linkInput,k=null===E||void 0===E||null===(t=E.state)||void 0===t?void 0:t.paramsInput,j=Object(r.useState)(null===k||void 0===k?void 0:k.transactionId),N=Object(a.a)(j,2),h=N[0],y=N[1],C=Object(r.useState)(Date.now()+12e4),D=Object(a.a)(C,2),I=D[0],x=D[1],L=Object(r.useState)(g),T=Object(a.a)(L,2),S=T[0],B=T[1],w=Object(l.b)(),R=Object(o.bindActionCreators)(s,w),_=Object(l.d)().getState().sk,A=Object(r.useRef)(null),P=null===k||void 0===k?void 0:k.cardItem,M=null===k||void 0===k?void 0:k.bankInfo,V=Object(r.useState)(b.c.NONE),F=Object(a.a)(V,2),H=F[0],z=F[1];return Object(r.useEffect)((function(){z(M.requiredDate)}),[M]),c.a.createElement("div",null,c.a.createElement("div",{className:"InputOtpBankScreen"},c.a.createElement(d.a,{isShowName:!0,cardDate:(null===P||void 0===P?void 0:P.cardDate)||"",cardNumber:Object(v.d)((null===P||void 0===P?void 0:P.cardNumber)||""),cardHolder:(null===P||void 0===P?void 0:P.cardHolder)||"",swiftCode:(null===M||void 0===M?void 0:M.swiftCode)||"",dateText:b.c[null!==H&&void 0!==H?H:"NONE"]}),c.a.createElement("div",{className:"TxtDescription"},"Nh\u1eadp m\xe3 OTP \u0111\xe3 \u0111\u01b0\u1ee3c g\u1eedi qua s\u1ed1 \u0111i\u1ec7n tho\u1ea1i \u0111\xe3 \u0111\u0103ng k\xfd v\u1edbi ".concat(null===M||void 0===M?void 0:M.shortName)),c.a.createElement(u.a,{ref:A,autoFocus:!0,isNumberInput:!0,length:6,className:"otpPinCodeContainer",inputClassName:"otpInput",onChangeOTP:function(e){6===e.length&&function(e){var t={clientId:null===_||void 0===_?void 0:_.clientId,transaction:h,OTP:e,swiftCode:null===k||void 0===k?void 0:k.swiftCode};R.bankLinkVerifyOTP({verifyLinkInput:t},(function(e,t){var a,r,c,i;e?(null===t||void 0===t||null===(a=t.BankLink)||void 0===a||null===(r=a.VerifyLink)||void 0===r?void 0:r.succeeded)?n.replace("/listLinkedBank",{cardItem:{cardNumber:null===P||void 0===P?void 0:P.cardNumber.replace(/[^0-9]/g,""),cardHolder:null===P||void 0===P?void 0:P.cardHolder},bankInfo:M,success:!0,gateway:M.gateway}):(A.current.clear(),m.b.next({message:null===t||void 0===t||null===(c=t.BankLink)||void 0===c||null===(i=c.VerifyLink)||void 0===i?void 0:i.message,isVisible:!0})):(A.current.clear(),m.b.next({message:null===t||void 0===t?void 0:t.message,isVisible:!0}))}))}(e)}}),c.a.createElement("div",{className:"TxtTime"},S===g?c.a.createElement(f.a,{renderer:function(e){return c.a.createElement("p",{className:"textResendBank font-medium"},"G\u1eedi l\u1ea1i (",(null===e||void 0===e?void 0:e.days)>0?"".concat(null===e||void 0===e?void 0:e.days,":"):null,(null===e||void 0===e?void 0:e.hours)>0?"".concat(null===e||void 0===e?void 0:e.hours,":"):null,(null===e||void 0===e?void 0:e.minutes)>0?"".concat(null===e||void 0===e?void 0:e.minutes,":"):"00:",(null===e||void 0===e?void 0:e.seconds)>0?"".concat(null===e||void 0===e?void 0:e.seconds):"0",")")},expired:I,onExpired:function(){B(p)}}):c.a.createElement("button",{type:"button",className:"resendbtnBank font-medium",onClick:function(){A.current.clear(),R.bankLinkVerify({linkInput:O},(function(e,t){var n,a,r,c,i,l;if(e)if("REQUIRED_OTP"===(null===t||void 0===t||null===(n=t.BankLink)||void 0===n||null===(a=n.Link)||void 0===a?void 0:a.state))x(Date.now()+12e4),B(g),y(null===t||void 0===t||null===(i=t.BankLink)||void 0===i||null===(l=i.Link)||void 0===l?void 0:l.transaction);else if("OTP_RETRY_TIMES_OVER"===(null===t||void 0===t||null===(r=t.BankLink)||void 0===r||null===(c=r.Link)||void 0===c?void 0:c.state)){var o,u;A.current.clear(),m.b.next({message:null===t||void 0===t||null===(o=t.BankLink)||void 0===o||null===(u=o.Link)||void 0===u?void 0:u.message,isVisible:!0})}else{var s,d;A.current.clear(),m.b.next({message:null===t||void 0===t||null===(s=t.BankLink)||void 0===s||null===(d=s.Link)||void 0===d?void 0:d.message,isVisible:!0})}else B(p)}))}},"G\u1eedi l\u1ea1i OTP"))))}}}]);