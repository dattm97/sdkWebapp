(this.webpackJsonppaymesdk=this.webpackJsonppaymesdk||[]).push([[98],{160:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(0),c=a.n(n),i=a(21),l=a(11),o=function(){var e=function(){i.b.next({type:"onClose"})};return c.a.createElement("div",{className:"btn-home",onClick:e,onKeyPress:e},c.a.createElement("img",{className:"iconReturnHome2",src:l.b.iconReturnHome2,alt:" "}))}},911:function(e,t,a){"use strict";a.r(t);var n=a(13),c=a(10),i=a(160),l=a(20),o=a(15),r=a(456),s=a(185),u=a(145),m=a.n(u),d=a(26),f=a.n(d),p=a(0),v=a.n(p),h=a(9),g=a(75),b=a(457),E=a.n(b),C=a(12),y=a(170),O=a(332),j=a(19),N=a(17),k=a(53),D=function(e){var t=e.onAgreePassport,a=void 0===t?function(){return null}:t,n=e.onClose,c=void 0===n?function(){return null}:n,i=Object(N.y)().mainColor;return v.a.createElement("div",{className:"PopupPassport__Layout absoluteLayout"},v.a.createElement("div",{className:"PopupPassport"},v.a.createElement(O.a,null),v.a.createElement("p",{className:"txtDesc"},C.a.txtDescPopupSelectPassport),v.a.createElement("div",{className:"btnAction"},v.a.createElement(j.a,{onClick:a,className:"btn",label:C.a.Agree,variant:"active",propStyleText:{textTransform:"none"}}),v.a.createElement(j.a,{onClick:c,propStyle:{background:Object(k.e)(i,.1)},className:"btn",label:C.a.Change,variant:"active",propStyleText:{textTransform:"none",color:i}}))))},S=function(e){var t=e.actionClose,a=e.setIdentification,n=e.identification,i=e.showPopupPassport,l=void 0===i?function(){return null}:i,o=Object(p.useState)(""),r=Object(c.a)(o,2),s=r[0],u=r[1];function m(e){"H\u1ed9 chi\u1ebfu"!==e.target.value?(u(e.target.value),a(e.target.value),t()):l()}return Object(p.useEffect)((function(){u(n)}),[]),Object(p.useEffect)((function(){}),[s]),v.a.createElement("div",{className:"formIdentifition font-medium"},v.a.createElement("div",{className:"layout"},v.a.createElement("span",{className:"title",onClick:function(){return t()}},v.a.createElement("div",{style:{flex:1}}),v.a.createElement("label",{style:{flex:6}}," Ch\u1ecdn lo\u1ea1i gi\u1ea5y t\u1edd "),v.a.createElement("img",{style:{flex:1,height:16,width:16},src:y.a.iconClose})),v.a.createElement("label",{className:"inputOption"},"Ch\u1ee9ng minh nh\xe2n d\xe2n",v.a.createElement("input",{value:"Ch\u1ee9ng minh nh\xe2n d\xe2n",type:"radio",checked:"Ch\u1ee9ng minh nh\xe2n d\xe2n"===s,onChange:m})),v.a.createElement("label",{className:"inputOption"},"C\u0103n c\u01b0\u1edbc c\xf4ng d\xe2n",v.a.createElement("input",{value:"Th\u1ebb c\u0103n c\u01b0\u1edbc c\xf4ng d\xe2n",type:"radio",checked:"Th\u1ebb c\u0103n c\u01b0\u1edbc c\xf4ng d\xe2n"===s,onChange:m})),v.a.createElement("label",{className:"inputOption"},"H\u1ed9 chi\u1ebfu",v.a.createElement("input",{value:"H\u1ed9 chi\u1ebfu",type:"radio",checked:"H\u1ed9 chi\u1ebfu"===s,onChange:m}))))},w={get:m.a,toUpper:f.a};t.default=function(){var e,t,a=Object(h.d)().getState().sk.partner,u=Object(p.useState)("M\u1eb7t Tr\u01b0\u1edbc"),m=Object(c.a)(u,2),d=m[0],b=m[1],j=Object(p.useState)("Ch\u1ee9ng minh nh\xe2n d\xe2n"),N=Object(c.a)(j,2),k=N[0],P=N[1],x=Object(p.useState)(!1),I=Object(c.a)(x,2),F=I[0],T=I[1],K=Object(p.useState)(!1),U=Object(c.a)(K,2),A=U[0],H=U[1],R=Object(p.useState)(!0),B=Object(c.a)(R,2),M=B[0],L=B[1],Y=Object(p.useState)(!1),W=Object(c.a)(Y,2),V=W[0],q=W[1],J=Object(p.useRef)(null),_=Object(p.useState)(!0),z=Object(c.a)(_,2),Q=z[0],G=z[1],X=Object(p.useState)(!1),Z=Object(c.a)(X,2),$=Z[0],ee=Z[1],te=Object(p.useState)({}),ae=Object(c.a)(te,2),ne=ae[0],ce=ae[1],ie=Object(s.a)().hasCamera,le=Object(g.useLocation)(),oe=null!==(e=null===(t=le.state)||void 0===t?void 0:t.isUpdateCCCD)&&void 0!==e&&e,re=Object(g.useHistory)(),se=v.a.useRef(null),ue=Object(o.a)().width,me=535;ue<me&&(me=ue-40);var de=Object(p.useRef)(!1);Object(p.useEffect)((function(){de.current=A,A&&q(!1)}),[A]),Object(p.useEffect)((function(){var e;pe();var t=setTimeout((function(){L(!1)}),2e3);if("IOS"===w.toUpper(null!==(e=null===a||void 0===a?void 0:a.type)&&void 0!==e?e:""))try{window.webkit.messageHandlers.openCamera.postMessage({isFront:w.get(le,"state.Data.isFront",!0),identification:"".concat(w.get(le,"state.Data.Identification","Ch\u1ee9ng minh nh\xe2n d\xe2n"))})}catch(n){console.log("[PAYMESDK] - error open camera",n)}return setTimeout((function(){de.current||q(!0)}),3e3),function(){clearTimeout(t),H(!1)}}),[]),Object(p.useEffect)((function(){var e;"WEB"===f()(null!==(e=null===a||void 0===a?void 0:a.type)&&void 0!==e?e:"")&&ie&&Object(r.a)((function(){console.log("requestPermissionCameraWeb success"),H(!0)}),(function(e){console.log("error",null===e||void 0===e?void 0:e.message)}))}),[ie]);var fe=function(){var e;if("IOS"!==w.toUpper(null!==(e=null===a||void 0===a?void 0:a.type)&&void 0!==e?e:"")){var t=se.current.getScreenshot();t&&(Q?re.push("/confirmKYC",{Data:{isFront:!0,Identification:k,imgFront:t},isUpdateCCCD:oe}):re.push("/confirmKYC",{Data:Object(n.a)(Object(n.a)({},ne),{},{isFront:!1,imgBack:t}),isUpdateCCCD:oe}))}else try{window.webkit.messageHandlers.openCamera.postMessage({isFront:w.get(le,"state.Data.isFront",!0),identification:"".concat(k)})}catch(c){console.log("[PAYMESDK] - error open camera",c)}},pe=function(){ce(w.get(le,"state.Data",{}));var e=w.get(le,"state.Data.isFront",!0),t=w.get(le,"state.Data.Identification","Ch\u1ee9ng minh nh\xe2n d\xe2n");G(e),b(e?"M\u1eb7t Tr\u01b0\u1edbc":"M\u1eb7t sau"),P(oe?"Th\u1ebb c\u0103n c\u01b0\u1edbc c\xf4ng d\xe2n":t)},ve={width:{min:me},height:{min:.67*me},aspectRatio:.67,facingMode:"environment"},he=function(){re.goBack()},ge=function(){var e;return null===J||void 0===J||null===(e=J.current)||void 0===e?void 0:e.click()},be=function(e){var t,a,c,i,o=new FileReader;if((null===e||void 0===e||null===(t=e.target)||void 0===t||null===(a=t.files[0])||void 0===a?void 0:a.size)>42e5)return l.b.next({message:"Vui l\xf2ng ch\u1ecdn h\xecnh \u1ea3nh d\u01b0\u1edbi 4mb.",isVisible:!0}),void(e.target.value=null);o.onloadend=function(){var e=o.result;Q?re.push("/confirmKYC",{Data:{isFront:!0,Identification:k,imgFront:e},isUpdateCCCD:oe}):re.push("/confirmKYC",{Data:Object(n.a)(Object(n.a)({},ne),{},{isFront:!1,imgBack:e}),isUpdateCCCD:oe})},o.readAsDataURL(null!==(c=null===e||void 0===e||null===(i=e.target)||void 0===i?void 0:i.files[0])&&void 0!==c?c:null)};return v.a.createElement("div",{className:"kyc"},function(){var e;return"IOS"!==w.toUpper(null!==(e=null===a||void 0===a?void 0:a.type)&&void 0!==e?e:"")?v.a.createElement("div",{className:"header"},v.a.createElement("div",{className:"headerInner row"},v.a.createElement("div",{className:"headerLeft col-2 nopadding"},v.a.createElement("div",{className:"btn-cancel",onClick:he,onKeyPress:he},v.a.createElement("img",{className:"imgBackWhite",src:y.a.iconBackWhite,alt:""}))),v.a.createElement("div",{className:"headerCenter col nopadding"},v.a.createElement("p",{className:"headerTitle font-semibold"},"Ch\u1ee5p \u1ea3nh gi\u1ea5y t\u1edd")),v.a.createElement("div",{className:"headerRight col-2 nopadding"},v.a.createElement(i.a,null)))):null}(),function(){var e;return"IOS"!==w.toUpper(null!==(e=null===a||void 0===a?void 0:a.type)&&void 0!==e?e:"")?v.a.createElement("div",{className:"container"},v.a.createElement("div",{className:"Colum-Line"},Q?oe?v.a.createElement("div",{className:"btn-col-left"},v.a.createElement("label",{className:"txt"},k)):v.a.createElement("div",{className:"btn-col-left",onClick:function(){return ee(!0)},onKeyPress:function(){return ee(!0)}},v.a.createElement("label",{className:"txt"},k),v.a.createElement("img",{className:"imgArrowDown",src:y.a.iconArrowDown,alt:""})):v.a.createElement("div",{className:"btn-col-left"}),v.a.createElement("p",{className:"col-right"},d)),v.a.createElement("div",{className:"formCenter"},v.a.createElement("div",{className:"layoutCamera",style:{width:me,height:.67*me}},A?v.a.createElement(E.a,{audio:!1,ref:se,screenshotFormat:"image/jpeg",screenshotQuality:.6,videoConstraints:ve}):null),v.a.createElement("div",{className:"layoutBorder"},v.a.createElement("div",{className:"borderWhite",style:{width:me,height:.67*me}},M?v.a.createElement("div",{className:"formCardFront"},v.a.createElement("label",null,d),v.a.createElement(O.c,null)):null,V&&(V?v.a.createElement("p",{style:{color:"white",textAlign:"center"}},"Kh\xf4ng ".concat(ie?"\u0111\u01b0\u1ee3c c\u1ea5p quy\u1ec1n truy c\u1eadp":"t\xecm th\u1ea5y"," camera, vui l\xf2ng ch\u1ecdn h\xecnh.")):null))),v.a.createElement("div",{className:"formDescription"},"Vui l\xf2ng c\u1ea7n ch\u1ec9nh gi\u1ea5y t\u1edd tu\u1ef3 th\xe2n v\xe0o gi\u1eefa khung")),v.a.createElement("div",{className:"formBottom"},v.a.createElement("span",{style:{display:"flex",flex:3,justifyContent:"center",opacity:A?1:.5},onClick:A?function(){return fe()}:null,onKeyPress:A?function(){return fe()}:null},v.a.createElement(O.b,null)),v.a.createElement("div",{className:"layoutSelectImage",onClick:function(){return ge()},onKeyPress:function(){return ge()}},v.a.createElement("input",{type:"file",style:{display:"none"},src:y.a.iconImg,accept:"image/png, image/jpeg",onChange:be,ref:J}),v.a.createElement("img",{src:y.a.iconImg,alt:" "}),v.a.createElement("div",null,C.a.takePicture)))):null}(),$?v.a.createElement(S,{setIdentification:function(e){return P(e)},identification:k,actionClose:function(){ee(!1)},showPopupPassport:function(){return T(!0)}}):null,F&&v.a.createElement(D,{onClose:function(){T(!1)},onAgreePassport:function(){P("H\u1ed9 chi\u1ebfu"),T(!1),ee(!1)}}))}}}]);