(this.webpackJsonppaymesdk=this.webpackJsonppaymesdk||[]).push([[78],{15:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n(10),a=n(0);function c(){var e="undefined"!==typeof window;function t(){return{width:e?window.innerWidth:null,height:e?window.innerHeight:null}}var n=Object(a.useState)(t()),c=Object(i.a)(n,2),o=c[0],l=c[1];return Object(a.useEffect)((function(){if(e){var n=function(){l(t())};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}}),[e]),o}},203:function(e,t,n){"use strict";n.d(t,"a",(function(){return g}));var i=n(54),a=n(53),c=n(26),o=n.n(c),l=n(112),r=n(95),u=n.n(r),s=n(0),d=n.n(s),m=n(9),v=n(75),y=n(11),f=n(19),p=n(20),h=n(21),b=n(15),g=function(e){var t=e.onClosePopup,n=e.type,c=void 0===n?"kycFace":n,r=e.handleOnNext,g=Object(v.useHistory)(),k=Object(s.useRef)(null),C=Object(b.a)().width,O=Object(m.d)().getState().sk,E=O.partner,I=O.configColor.mainColor,j=function(){switch(c){case"kycIdentifyImg":return Object(l.replaceColor)([0,181,26],Object(a.a)(I),y.a.kycChupGTTT);case"kycFace":return Object(l.replaceColor)([0,181,26],Object(a.a)(I),y.a.kycXacthuckhuonmat);case"kycVideo":return Object(l.replaceColor)([45,187,84],Object(a.a)(I),Object(l.replaceColor)([0,190,0],Object(a.a)(I),y.a.kycQuayVideo));default:return Object(l.replaceColor)([0,181,26],Object(a.a)(I),y.a.kycChupGTTT)}};Object(s.useEffect)((function(){u.a.loadAnimation({container:k.current,renderer:"svg",loop:!0,autoplay:!0,animationData:j()})}),[]);var F=function(){t&&t()};return c?d.a.createElement("div",{className:"modalContainer"},d.a.createElement("div",{className:"modalInner",style:{width:"100%"}},d.a.createElement("div",{className:"modalInner_header"},d.a.createElement("p",{className:"txtFirstLine font-SemiBold"},function(){switch(c){case"kycIdentifyImg":return"Ch\u1ee5p h\xecnh gi\u1ea5y t\u1edd tu\u1ef3 th\xe2n";case"kycFace":return"Ch\u1ee5p \u1ea3nh x\xe1c th\u1ef1c khu\xf4n m\u1eb7t";case"kycVideo":return"Quay video x\xe1c th\u1ef1c khu\xf4n m\u1eb7t v\xe0 gi\u1ea5y t\u1edd tu\u1ef3 th\xe2n";default:return"--"}}()),d.a.createElement("div",{onClick:F,onKeyPress:F,style:{position:"absolute",right:0}},d.a.createElement("img",{className:"iconClose",src:y.b.icSetClose16Px,alt:" "}))),"kycIdentifyImg"===c&&d.a.createElement("p",{style:{backgroundColor:Object(a.e)(I,.15)},className:"txtSecondLine font-medium"},"Theo quy \u0111\u1ecbnh c\u1ee7a NHNN, t\xe0i kho\u1ea3n V\xed \u0111i\u1ec7n t\u1eed ph\u1ea3i \u0111\u01b0\u1ee3c \u0111\u1ecbnh danh tr\u01b0\u1edbc khi s\u1eed d\u1ee5ng. "),d.a.createElement("div",{style:{display:"flex",justifyContent:"center",alignItems:"center"}},d.a.createElement("div",{ref:k,style:{width:(C>570?570:C)/3}})),function(){switch(c){case"kycIdentifyImg":return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"bulletContent"},d.a.createElement("p",{className:"txtBulletContent font-semibold"},"1. S\u1eed d\u1ee5ng gi\u1ea5y t\u1edd tu\u1ef3 th\xe2n h\u1ee3p l\u1ec7 c\u1ee7a ch\xednh b\u1ea1n")),d.a.createElement("div",{className:"bulletContent"},d.a.createElement("p",{className:"txtBulletContent font-semibold"},"2. Ph\u1ea3i \u0111\u1eb7t th\u1ebb b\xean trong khung camera")),d.a.createElement("div",{className:"bulletContent"},d.a.createElement("p",{className:"txtBulletContent font-semibold"},"3. Kh\xf4ng s\u1eed d\u1ee5ng b\u1ea3n sao c\u1ee7a gi\u1ea5y t\u1edd tu\u1ef3 th\xe2n")));case"kycFace":return d.a.createElement(d.a.Fragment,null," ",d.a.createElement("div",{className:"bulletContent"},d.a.createElement("p",{className:"txtBulletContent font-semibold"},"1. Vui l\xf2ng gi\u1eef g\u01b0\u01a1ng m\u1eb7t \u1edf trong khung tr\xf2n")),d.a.createElement("div",{className:"bulletContent"},d.a.createElement("p",{className:"txtBulletContent font-semibold"},"2. Gi\u1eef cho \u1ea3nh s\u1eafc n\xe9t kh\xf4ng b\u1ecb nho\xe8")));case"kycVideo":return d.a.createElement(d.a.Fragment,null,d.a.createElement("div",{className:"bulletContent"},d.a.createElement("p",{className:"txtBulletContent font-semibold"},"1. Video s\u1ebd c\xf3 \u0111\u1ed9 d\xe0i 5 gi\xe2y")),d.a.createElement("div",{className:"bulletContent"},d.a.createElement("p",{className:"txtBulletContent font-semibold"},"2. Vui l\xf2ng gi\u1eef g\u01b0\u01a1ng m\u1eb7t v\xe0 m\u1eb7t tr\u01b0\u1edbc gi\u1ea5y t\u1edd t\xf9y th\xe2n c\u1ee7a b\u1ea1n tr\u01b0\u1edbc m\xe1y quay")));default:return null}}(),d.a.createElement("div",{className:"buttonModal"},d.a.createElement(f.a,{label:"TI\u1ebeP T\u1ee4C",variant:"active",onClick:function(){!function(){var e;r?r():(t(),i.a.getKycMode()||p.b.next({message:"",isVisible:!0}),"WEB"===o()(null!==(e=null===E||void 0===E?void 0:E.type)&&void 0!==e?e:"")?"kycIdentifyImg"===c?g.push("/kycImg"):"kycFace"===c?g.push("/kycFace"):g.push("/kycVideo"):h.b.next({type:"onKyc",kycMode:c}))}()}})))):null}},204:function(e,t,n){"use strict";n.r(t),n.d(t,"accountKyc",(function(){return o}));var i=n(13),a=n(16),c=n(25);function o(e,t){return{api:function(e){return Object(c.b)("mutation Mutation($kycInput: KYCInput!) {\n    Account {\n      KYC(input: $kycInput) {\n        succeeded\n        message\n        createdAt\n      }\n    }\n  }",Object(i.a)({},e))},type:a.L.ACCOUNT_KYC,payload:e,callback:t}}},205:function(e,t,n){"use strict";n.r(t),n.d(t,"uploadFile",(function(){return c}));var i=n(25),a=n(16);function c(e,t){return{api:function(e){return Object(i.a)(e)},type:a.K.UPLOAD_FILE,showLoading:!0,payload:e,callback:t}}},869:function(e,t,n){"use strict";n.r(t);var i=n(13),a=n(10),c=n(0),o=n.n(c),l=n(75),r=n(9),u=n(18),s=n(26),d=n.n(s),m=n(145),v=n.n(m),y=n(19),f=n(204),p=n(205),h=n(20),b=n(15),g=n(21),k=n(16),C=n(203),O=n(52),E=n(22),I={get:v.a};t.default=function(){var e,t,n=Object(l.useHistory)(),s=Object(l.useLocation)(),m=null!==(e=null===(t=s.state)||void 0===t?void 0:t.isUpdateCCCD)&&void 0!==e&&e,v=Object(b.a)().height,j=Object(r.c)((function(e){var t,n;return null===e||void 0===e||null===(t=e.sk)||void 0===t||null===(n=t.kyc)||void 0===n?void 0:n.kycMode})),F=(null===j||void 0===j?void 0:j.kycFace)?"kycFace":(null===j||void 0===j?void 0:j.kycVideo)?"kycVideo":"",N=Object(c.useState)({}),x=Object(a.a)(N,2),w=x[0],B=x[1],K=Object(c.useState)(null),V=Object(a.a)(K,2),D=V[0],T=V[1],S=Object(c.useState)(""),A=Object(a.a)(S,2),P=A[0],M=A[1],L=Object(r.c)((function(e){var t;return null===e||void 0===e||null===(t=e.sk)||void 0===t?void 0:t.partner})),H=Object(r.b)(),U=Object(u.bindActionCreators)(f,H),Y=Object(u.bindActionCreators)(p,H),R=Object(r.c)((function(e){var t;return null===e||void 0===e||null===(t=e.sk)||void 0===t?void 0:t.clientId})),G=Object(E.b)();Object(c.useEffect)((function(){var e,t;B(I.get(s,"state.Data",{})),!0===(null===(e=s.state)||void 0===e||null===(t=e.Data)||void 0===t?void 0:t.isFront)?T(I.get(s,"state.Data.imgFront",{})):T(I.get(s,"state.Data.imgBack",{}))}),[s]);var W=function(){m||!F?function(){if(n.push("/processingLoading"),"H\u1ed9 chi\u1ebfu"===w.Identification){var e=X(w.imgFront),t=new FormData;t.append("files",e,"imgFront.jpg"),Y.uploadFile(t,(function(e,t){if(e){var i={clientId:R,identifyType:"PASSPORT",image:{front:t[0].path}};U.accountKyc({kycInput:i},(function(e,t){var i,a;e?(O.b.next({message:null===t||void 0===t||null===(i=t.Account)||void 0===i||null===(a=i.KYC)||void 0===a?void 0:a.message,isVisible:!0,ver:"2",title:""}),n.push("/")):n.push("/")}))}else{var a;h.b.next({message:null!==(a=null===t||void 0===t?void 0:t.message)&&void 0!==a?a:"Error uploadFile",isVisible:!0}),n.push("/")}}))}else{var i=X(w.imgFront),a=X(w.imgBack),c=new FormData;c.append("files",i,"imgFront.jpg"),c.append("files",a,"imgBack.jpg");var o="Ch\u1ee9ng minh nh\xe2n d\xe2n"===w.Identification?"CMND":"CCCD";Y.uploadFile(c,(function(e,t){if(e){var i={clientId:R,identifyType:o};m?i.identifyIC={front:null===t||void 0===t?void 0:t[0].path,back:null===t||void 0===t?void 0:t[1].path}:i.image={front:null===t||void 0===t?void 0:t[0].path,back:null===t||void 0===t?void 0:t[1].path},U.accountKyc({kycInput:i},(function(e,t){if(e){var i,a;if(m)return void n.push("/profile");O.b.next({message:null===t||void 0===t||null===(i=t.Account)||void 0===i||null===(a=i.KYC)||void 0===a?void 0:a.message,isVisible:!0,ver:"2",title:""}),n.push("/")}else n.push("/")}))}else{var a;h.b.next({message:null!==(a=null===t||void 0===t?void 0:t.message)&&void 0!==a?a:"Error uploadFile",isVisible:!0}),n.push("/")}}))}}():M(F)},X=function(e){for(var t=e.split(","),n=t[0].indexOf("base64")>=0?atob(t[1]):decodeURI(t[1]),i=t[0].split(":")[1].split(";")[0],a=new Uint8Array(n.length),c=0;c<n.length;c++)a[c]=n.charCodeAt(c);return new Blob([a],{type:i})};return o.a.createElement("div",{className:"confirmKYC",style:{height:v-48-G,overflow:"auto"}},o.a.createElement("div",{className:"container",style:{marginTop:0,height:v-48-G-70,overflow:"auto"}},o.a.createElement("label",null,w.isFront?"M\u1eb7t tr\u01b0\u1edbc":"M\u1eb7t Sau"),o.a.createElement("img",{style:{marginBottom:20,width:"100%"},src:D}),o.a.createElement("label",null,"Vui l\xf2ng x\xe1c nh\u1eadn h\xecnh \u1ea3nh r\xf5 r\xe0ng v\xe0 d\u1ec5 \u0111\u1ecdc, tr\u01b0\u1edbc khi ti\u1ebfp t\u1ee5c ")),o.a.createElement("div",{className:"layoutBottom",style:{margin:0}},o.a.createElement(y.a,{label:"Ch\u1ee5p l\u1ea1i",variant:"active",onClick:function(){var e;if("EXPO"===d()(null!==(e=null===L||void 0===L?void 0:L.type)&&void 0!==e?e:""))return g.b.next({type:"onKyc",actions:"onKyc",isFront:null===w||void 0===w?void 0:w.isFront,Identification:null===w||void 0===w?void 0:w.Identification,kycMode:"kycIdentifyImg",isUpdateCCCD:m}),void n.goBack();n.push("/kycImg",{Data:{isFront:!0,Identification:w.Identification}})}}),o.a.createElement(y.a,{label:("H\u1ed9 chi\u1ebfu"!==w.Identification||F)&&(m&&w.isFront||F)?"Ti\u1ebfp t\u1ee5c":"Ho\xe0n t\u1ea5t",variant:"active",onClick:function(){return function(){var e;"H\u1ed9 chi\u1ebfu"!==w.Identification?w&&w.isFront?"EXPO"===d()(null!==(e=null===L||void 0===L?void 0:L.type)&&void 0!==e?e:"")?g.b.next({type:"onKyc",actions:"onKyc",isFront:!1,Identification:null===w||void 0===w?void 0:w.Identification,imgFront:w.imgFront,kycMode:"kycIdentifyImg",isUpdateCCCD:m}):n.push("/kycImg",{Data:Object(i.a)(Object(i.a)({},w),{},{isFront:!1,Identification:null===w||void 0===w?void 0:w.Identification}),isUpdateCCCD:m}):w&&!w.isFront?W():h.b.next({message:"error onBtnNext",isVisible:!0}):W()}()}})),P&&o.a.createElement(C.a,{onClosePopup:function(){return M("")},type:P,handleOnNext:function(){var e,t;M(""),H({type:k.I,payload:{identifyType:"Ch\u1ee9ng minh nh\xe2n d\xe2n"===w.Identification?"CMND":"H\u1ed9 chi\u1ebfu"===w.Identification?"PASSPORT":"CCCD",imgFront:w.imgFront,imgBack:null!==(e=w.imgBack)&&void 0!==e?e:""}}),"WEB"===d()(null!==(t=null===L||void 0===L?void 0:L.type)&&void 0!==t?t:"")?"kycFace"===F?n.push("/kycFace"):n.push("/kycVideo"):g.b.next({type:"onKyc",kycMode:F})}}))}}}]);