"use strict";(self.webpackChunkpayme_mini_app=self.webpackChunkpayme_mini_app||[]).push([[986],{8986:function(n,t,e){e.r(t),e.d(t,{default:function(){return M}});var o=e(1413),i=e(29439),a=e(50228),r=e(62812),l=e(43595),d=e(27962),c=e(39709),s=e(45798),u=e(62038),v=e(72791),f=e(8503),g=e(57689),h=e(22940),p=e(33168),Z=e(4238),I=e(69745),m=e(64740),C=e(66030),x=e(71239),T=e(4440),S=e(95218),y=e(15661),b=e(69291),E=e(48983),P=e(79482),L=e(57380),B=function(n){(function(n){return"touches"in n})(n)&&n.touches.length<2&&n.preventDefault&&n.preventDefault()},j=function(n,t){var e=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},o=e.shouldPreventDefault,a=void 0===o||o,r=e.delay,l=void 0===r?300:r,d=(0,v.useState)(!1),c=(0,i.Z)(d,2),s=c[0],u=c[1],f=(0,v.useRef)(),g=(0,v.useRef)(),h=(0,v.useCallback)((function(t){a&&t.target&&(t.target.addEventListener("touchend",B,{passive:!1}),g.current=t.target),f.current=setTimeout((function(){n(t),u(!0)}),l)}),[n,l,a]),p=(0,v.useCallback)((function(n){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];f.current&&clearTimeout(f.current),e&&!s&&t(),u(!1),a&&g.current&&g.current.removeEventListener("touchend",B)}),[a,t,s]);return{onMouseDown:function(n){return h(n)},onTouchStart:function(n){return h(n)},onMouseUp:function(n){return p(n)},onMouseLeave:function(n){return p(n,!1)},onTouchEnd:function(n){return p(n)}}},w=e(32232),k=e(58195),D=e(95735),R=e(8096),O=e(80184),Y=(0,v.forwardRef)((function(n,t){return(0,O.jsx)(w.Z,(0,o.Z)({direction:"down",timeout:1e3,ref:t},n))})),K=function(n){var t=n.isOpen,e=n.onClose,o=(0,m.TL)();return(0,O.jsxs)(k.Z,{open:t,onClose:e,"aria-describedby":"alert-dialog-slide-description",TransitionComponent:Y,PaperProps:{sx:{width:"100%",borderRadius:4,pb:2}},sx:{background:"rgba(18, 18, 18, 0.6)",zIndex:9999999999},children:[(0,O.jsx)(D.Z,{sx:{mt:2},onClick:function(){o((0,C.yd)(R.X.DEV)),o(x.Yy.clientSetup()),e({},"escapeKeyDown")},children:(0,O.jsx)(r.Z,{children:"Dev"})}),(0,O.jsx)(D.Z,{sx:{mt:2},onClick:function(){o((0,C.yd)(R.X.SANDBOX)),o(x.Yy.clientSetup()),e({},"escapeKeyDown")},children:(0,O.jsx)(r.Z,{children:"Sandbox"})}),(0,O.jsx)(D.Z,{sx:{mt:2},onClick:function(){o((0,C.yd)(R.X.PRODUCTION)),o(x.Yy.clientSetup()),e({},"escapeKeyDown")},children:(0,O.jsx)(r.Z,{children:"Production"})}),(0,O.jsx)(D.Z,{sx:{mt:2},onClick:function(){o((0,C.LP)()),e({},"escapeKeyDown")},children:(0,O.jsx)(r.Z,{children:"Show log"})})]})},G=e(73915),A=e(12910);var M=function(){var n,t,e,B,w=(0,m.TL)(),k=(0,p.$)().t,D=(0,g.s0)(),R=(0,m.CG)(C.Ty),Y=(0,m.CG)(C.vI),M=(0,m.CG)(T.sq),H=(0,m.CG)(T.zm),U=(0,m.CG)(T.hL),N=(0,v.useState)(""),_=(0,i.Z)(N,2),F=_[0],V=_[1],W=(0,v.useState)(!1),z=(0,i.Z)(W,2),X=z[0],J=z[1],q=(0,v.useState)(""),$=(0,i.Z)(q,2),Q=$[0],nn=$[1],tn=(0,v.useState)(),en=(0,i.Z)(tn,2),on=en[0],an=en[1],rn=(0,v.useState)(0),ln=(0,i.Z)(rn,2),dn=ln[0],cn=ln[1],sn=(0,v.useState)(!1),un=(0,i.Z)(sn,2),vn=un[0],fn=un[1],gn=(0,v.useRef)(null),hn=j((function(){console.log("longpress is triggered")}),(function(){cn(dn+1),5===dn&&(fn(!0),cn(0))}),{shouldPreventDefault:!0,delay:1e3});return(0,v.useEffect)((function(){J(!!F)}),[F]),(0,O.jsxs)(I.x,{children:[(0,O.jsx)(s.Z,{title:"Login"}),(0,O.jsxs)(u.u3,{padding:2.5,paddingTop:"IOS"===(null===R||void 0===R||null===(n=R.platform)||void 0===n?void 0:n.toUpperCase())||"ANDROID"===(null===R||void 0===R||null===(t=R.platform)||void 0===t?void 0:t.toUpperCase())?0:2.5,paddingBottom:"IOS"===(null===R||void 0===R||null===(e=R.platform)||void 0===e?void 0:e.toUpperCase())||"ANDROID"===(null===R||void 0===R||null===(B=R.platform)||void 0===B?void 0:B.toUpperCase())?0:2.5,display:"flex",flexDirection:"column",justifyContent:"space-between",children:[(0,O.jsxs)(a.Z,{children:[(0,O.jsx)(h.Z,{}),(0,O.jsx)(a.Z,{sx:{paddingTop:2.5}}),(0,O.jsx)(r.Z,(0,o.Z)((0,o.Z)({},hn),{},{variant:"h2",textAlign:"left",color:"text.secondary",children:k((0,Z.w)())})),(0,O.jsx)(a.Z,{sx:{fontSize:24,fontWeight:"bold",color:window.location.hostname.includes("ngrok")?"yellow":"black"},children:k("auth.yourPhone")}),(0,O.jsx)(l.Z,{inputProps:{maxLength:12,inputMode:"numeric",pattern:"[0-9]*"},sx:{color:"text.secondary",caretColor:"tex.secondary !important"},fullWidth:!0,placeholder:"097xxxxxx",disableUnderline:!0,autoFocus:!0,type:"tel",value:F,onChange:function(n){var t,e;nn(""),V(null===n||void 0===n||null===(t=n.target)||void 0===t||null===(e=t.value)||void 0===e?void 0:e.replace(/[^0-9]/g,""))}}),(0,O.jsx)(a.Z,{mt:1}),(0,O.jsx)(d.Z,{in:!!Q,timeout:300,children:(0,O.jsx)(r.Z,{variant:"subtitle2",color:"text.danger",textAlign:"left",children:Q})})]}),(0,O.jsx)(c.Z,{disabled:!X,loading:M,loadingIndicator:"".concat(k("pleaseWait")),variant:"contained",disableElevation:!0,onClick:function(){var n=(0,b.kj)(F);n?nn(k(n)):(nn(""),w(P.u.getInfo({phone:F,clientId:Y},(function(n,t){var e,i,a,r,l;if(n)if(204200===(null===t||void 0===t?void 0:t.code))w((0,T.ZC)((0,o.Z)((0,o.Z)({},null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.accountInfo),{},{isTrustDevice:!0}))),L.J.next({type:"jsPreferences",data:{accountInfo:(0,o.Z)((0,o.Z)({},null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.accountInfo),{},{isTrustDevice:!0})}}),(0,G.G)({accountInfo:null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.accountInfo}),null!==t&&void 0!==t&&null!==(r=t.data)&&void 0!==r&&null!==(l=r.accountInfo)&&void 0!==l&&l.accountId&&D("/login-step2");else if(204205===(null===t||void 0===t?void 0:t.code))an(y.Y.REGISTER),w(x.Yy.sendActiveCode({phone:F,clientId:Y,type:y.Y.REGISTER},(function(n,t){var e,o;if(n)if(204200===t.code)null===(e=gn.current)||void 0===e||e.open(),null===(o=gn.current)||void 0===o||o.setExpired((new Date).getTime()+6e4);else if(204203===t.code){var i,a;null===(i=gn.current)||void 0===i||i.open(),null===(a=gn.current)||void 0===a||a.setExpired((new Date).getTime()+(t.data.remainingTime||6e4))}else S.Z.alertContent={title:"L\u1ed7i k\u1ebft n\u1ed1i",subtitle:t.message,firstButtonTitle:"\u0110\xe3 hi\u1ec3u"}})));else if(204204===(null===t||void 0===t?void 0:t.code)){var d,c,s;L.J.next({type:"jsPreferences",data:{accountInfo:null===t||void 0===t||null===(d=t.data)||void 0===d?void 0:d.accountInfo}}),(0,G.G)({accountInfo:null===t||void 0===t||null===(c=t.data)||void 0===c?void 0:c.accountInfo}),w((0,T.ZC)(null===t||void 0===t||null===(s=t.data)||void 0===s?void 0:s.accountInfo)),t.data.accountInfo.accountId&&(an(y.Y.TRUST_DEVICE),w(x.Yy.sendActiveCode({phone:F,clientId:Y,type:y.Y.TRUST_DEVICE},(function(n,t){var e,o;if(n)if(204200===t.code)null===(e=gn.current)||void 0===e||e.open(),null===(o=gn.current)||void 0===o||o.setExpired((new Date).getTime()+6e4);else if(204203===t.code){var i=(0,b.h9)(t.data.remainingTime||0);S.Z.alertContent={title:"B\u1ea1n \u0111\xe3 nh\u1eadp sai OTP ".concat(t.data.times||"nhi\u1ec1u"," l\u1ea7n"),subtitle:["Nh\u1eadn OTP m\u1edbi sau",i,"ho\u1eb7c li\xean h\u1ec7 CSKH ngay \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3."],firstButtonTitle:"Li\xean h\u1ec7 CSKH",secondButtonTitle:"Th\u1eed l\u1ea1i sau",reverseButton:!0,onClickFirstButton:function(){return(0,A.Z)()},onClickSecondButton:function(){var n;return null===(n=gn.current)||void 0===n?void 0:n.close()}}}else S.Z.alertContent={title:"L\u1ed7i k\u1ebft n\u1ed1i",subtitle:t.message,firstButtonTitle:"\u0110\xe3 hi\u1ec3u"}}))))}else 204207===t.code?S.Z.alertContent={title:"T\xe0i kho\u1ea3n c\u1ee7a b\u1ea1n \u0111\xe3 b\u1ecb kho\xe1",subtitle:"Li\xean h\u1ec7 CSKH ngay \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3",firstButtonTitle:"Li\xean h\u1ec7 CSKH",onClickFirstButton:function(){return(0,A.Z)()}}:nn(t.message);else nn(t.message)}))))},children:k("continue")})]}),(0,O.jsx)(f.Z,{ref:gn,loadingVerifyOTP:H,title:k("auth.verifyOTP"),phone:F,onSubmit:function(n){n&&(on===y.Y.TRUST_DEVICE?w(x.Yy.verifyActiveCode({phone:F,clientId:Y,activeCode:n},(function(t,e){if(t)if(204400===e.code)w((0,T.ZC)((0,o.Z)((0,o.Z)({},U),{},{isTrustDevice:!0}))),L.J.next({type:"jsPreferences",data:{accountInfo:(0,o.Z)((0,o.Z)({},U),{},{isTrustDevice:!0})}}),(0,G.G)({accountInfo:U}),D("/login-step2?activeCode=".concat(n));else if(204404===e.code){var i=(0,b.h9)(e.data.remainingTime||0);S.Z.alertContent={title:"B\u1ea1n \u0111\xe3 nh\u1eadp sai OTP ".concat(e.data.times||"nhi\u1ec1u"," l\u1ea7n"),subtitle:["Nh\u1eadn OTP m\u1edbi sau",i,"ho\u1eb7c li\xean h\u1ec7 CSKH ngay \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3."],firstButtonTitle:"Li\xean h\u1ec7 CSKH",secondButtonTitle:"Th\u1eed l\u1ea1i sau",reverseButton:!0,onClickFirstButton:function(){return(0,A.Z)()},onClickSecondButton:function(){var n;return null===(n=gn.current)||void 0===n?void 0:n.close()}}}else{var a,r;null===(a=gn.current)||void 0===a||a.setErrorMessage(e.message),null===(r=gn.current)||void 0===r||r.showError()}}))):on===y.Y.REGISTER&&w(E.a.registerVerifyActiveCode({phone:F,clientId:Y,activeCode:n},(function(t,e){if(t)if(204500===e.code)D("/create-pin?phone=".concat(F,"&activeCode=").concat(n));else if(204513===e.code){var o=(0,b.h9)(e.data.remainingTime||0);S.Z.alertContent={title:"B\u1ea1n \u0111\xe3 nh\u1eadp sai OTP ".concat(e.data.times||"nhi\u1ec1u"," l\u1ea7n"),subtitle:["Nh\u1eadn OTP m\u1edbi sau",o,"ho\u1eb7c li\xean h\u1ec7 CSKH ngay \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3."],firstButtonTitle:"Li\xean h\u1ec7 CSKH",secondButtonTitle:"Th\u1eed l\u1ea1i sau",reverseButton:!0,onClickFirstButton:function(){return(0,A.Z)()},onClickSecondButton:function(){var n;return null===(n=gn.current)||void 0===n?void 0:n.close()}}}else{var i,a;null===(i=gn.current)||void 0===i||i.setErrorMessage(e.message),null===(a=gn.current)||void 0===a||a.showError()}}))))},onResend:function(){w(x.Yy.sendActiveCode({phone:F,clientId:Y,type:on===y.Y.REGISTER?y.Y.REGISTER:y.Y.TRUST_DEVICE},(function(n,t){var e;if(n)if(204200===t.code)null===(e=gn.current)||void 0===e||e.setExpired((new Date).getTime()+6e4);else if(204203===t.code){var o;null===(o=gn.current)||void 0===o||o.setExpired((new Date).getTime()+(t.data.remainingTime||6e4))}else if(204207===t.code){var i=(0,b.h9)(t.data.remainingTime||0);S.Z.alertContent={title:"B\u1ea1n \u0111\xe3 nh\u1eadp sai OTP ".concat(t.data.times||"nhi\u1ec1u"," l\u1ea7n"),subtitle:["Nh\u1eadn OTP m\u1edbi sau",i,"ho\u1eb7c li\xean h\u1ec7 CSKH ngay \u0111\u1ec3 \u0111\u01b0\u1ee3c h\u1ed7 tr\u1ee3."],firstButtonTitle:"Li\xean h\u1ec7 CSKH",secondButtonTitle:"Th\u1eed l\u1ea1i sau",reverseButton:!0,onClickFirstButton:function(){return(0,A.Z)()},onClickSecondButton:function(){var n;return null===(n=gn.current)||void 0===n?void 0:n.close()}}}else S.Z.alertContent={title:"L\u1ed7i k\u1ebft n\u1ed1i",subtitle:t.message,firstButtonTitle:"\u0110\xe3 hi\u1ec3u"}})))}}),(0,O.jsx)(K,{isOpen:vn,onClose:function(n,t){"backdropClick"!==t&&fn(!1)}})]})}},4238:function(n,t,e){e.d(t,{v:function(){return i},w:function(){return o}});var o=function(){var n=(new Date).getHours();return n>=0&&n<11?"auth.goodMorning":n<14?"auth.goodAfternoon1":n<18?"auth.goodAfternoon2":"auth.goodEvening"},i=function(n){var t=n.split(" ");return t.length<=2?n||"":t.slice(-2).join(" ")}},39709:function(n,t,e){e.d(t,{Z:function(){return x}});var o=e(4942),i=e(63366),a=e(87462),r=e(72791),l=e(49853),d=e(51853),c=e(94419),s=e(60277),u=e(85513),v=e(75579),f=e(27170),g=e(21217);function h(n){return(0,g.Z)("MuiLoadingButton",n)}var p=(0,e(75878).Z)("MuiLoadingButton",["root","loading","loadingIndicator","loadingIndicatorCenter","loadingIndicatorStart","loadingIndicatorEnd","endIconLoadingEnd","startIconLoadingStart"]),Z=e(80184),I=["children","disabled","id","loading","loadingIndicator","loadingPosition","variant"],m=(0,s.ZP)(v.Z,{shouldForwardProp:function(n){return function(n){return"ownerState"!==n&&"theme"!==n&&"sx"!==n&&"as"!==n&&"classes"!==n}(n)||"classes"===n},name:"MuiLoadingButton",slot:"Root",overridesResolver:function(n,t){return[t.root,t.startIconLoadingStart&&(0,o.Z)({},"& .".concat(p.startIconLoadingStart),t.startIconLoadingStart),t.endIconLoadingEnd&&(0,o.Z)({},"& .".concat(p.endIconLoadingEnd),t.endIconLoadingEnd)]}})((function(n){var t=n.ownerState,e=n.theme;return(0,a.Z)((0,o.Z)({},"& .".concat(p.startIconLoadingStart,", & .").concat(p.endIconLoadingEnd),{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0}),"center"===t.loadingPosition&&(0,o.Z)({transition:e.transitions.create(["background-color","box-shadow","border-color"],{duration:e.transitions.duration.short})},"&.".concat(p.loading),{color:"transparent"}),"start"===t.loadingPosition&&t.fullWidth&&(0,o.Z)({},"& .".concat(p.startIconLoadingStart,", & .").concat(p.endIconLoadingEnd),{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginRight:-8}),"end"===t.loadingPosition&&t.fullWidth&&(0,o.Z)({},"& .".concat(p.startIconLoadingStart,", & .").concat(p.endIconLoadingEnd),{transition:e.transitions.create(["opacity"],{duration:e.transitions.duration.short}),opacity:0,marginLeft:-8}))})),C=(0,s.ZP)("div",{name:"MuiLoadingButton",slot:"LoadingIndicator",overridesResolver:function(n,t){var e=n.ownerState;return[t.loadingIndicator,t["loadingIndicator".concat((0,l.Z)(e.loadingPosition))]]}})((function(n){var t=n.theme,e=n.ownerState;return(0,a.Z)({position:"absolute",visibility:"visible",display:"flex"},"start"===e.loadingPosition&&("outlined"===e.variant||"contained"===e.variant)&&{left:"small"===e.size?10:14},"start"===e.loadingPosition&&"text"===e.variant&&{left:6},"center"===e.loadingPosition&&{left:"50%",transform:"translate(-50%)",color:(t.vars||t).palette.action.disabled},"end"===e.loadingPosition&&("outlined"===e.variant||"contained"===e.variant)&&{right:"small"===e.size?10:14},"end"===e.loadingPosition&&"text"===e.variant&&{right:6},"start"===e.loadingPosition&&e.fullWidth&&{position:"relative",left:-10},"end"===e.loadingPosition&&e.fullWidth&&{position:"relative",right:-10})})),x=r.forwardRef((function(n,t){var e=(0,u.Z)({props:n,name:"MuiLoadingButton"}),o=e.children,r=e.disabled,s=void 0!==r&&r,v=e.id,g=e.loading,p=void 0!==g&&g,x=e.loadingIndicator,T=e.loadingPosition,S=void 0===T?"center":T,y=e.variant,b=void 0===y?"text":y,E=(0,i.Z)(e,I),P=(0,d.Z)(v),L=null!=x?x:(0,Z.jsx)(f.Z,{"aria-labelledby":P,color:"inherit",size:16}),B=(0,a.Z)({},e,{disabled:s,loading:p,loadingIndicator:L,loadingPosition:S,variant:b}),j=function(n){var t=n.loading,e=n.loadingPosition,o=n.classes,i={root:["root",t&&"loading"],startIcon:[t&&"startIconLoading".concat((0,l.Z)(e))],endIcon:[t&&"endIconLoading".concat((0,l.Z)(e))],loadingIndicator:["loadingIndicator",t&&"loadingIndicator".concat((0,l.Z)(e))]},r=(0,c.Z)(i,h,o);return(0,a.Z)({},o,r)}(B),w=p?(0,Z.jsx)(C,{className:j.loadingIndicator,ownerState:B,children:L}):null;return(0,Z.jsxs)(m,(0,a.Z)({disabled:s||p,id:P,ref:t},E,{variant:b,classes:j,ownerState:B,children:["end"===B.loadingPosition?o:w,"end"===B.loadingPosition?w:o]}))}))}}]);
//# sourceMappingURL=986.9ef133b9.chunk.js.map