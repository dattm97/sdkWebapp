(this.webpackJsonppaymesdk=this.webpackJsonppaymesdk||[]).push([[122],{841:function(e,t,n){"use strict";n.r(t);var a=n(10),l=n(20),i=n(15),c=n(456),r=n(185),o=n(145),s=n.n(o),u=n(26),d=n.n(u),m=n(0),v=n.n(m),f=n(9),g=n(75),p=n(457),h=n.n(p),y=n(12),E=n(170),b=n(332),j={get:s.a,toUpper:d.a};t.default=function(){var e=Object(f.d)().getState().sk.partner,t=Object(m.useState)(!1),n=Object(a.a)(t,2),o=n[0],s=n[1],u=Object(m.useState)(!1),p=Object(a.a)(u,2),O=p[0],N=p[1],k=Object(m.useRef)(null),C=Object(r.a)().hasCamera,w=Object(g.useHistory)(),B=v.a.useRef(null),R=Object(i.a)().width,S=535;R<S&&(S=R-40);var I=Object(m.useRef)(!1);Object(m.useEffect)((function(){I.current=o,o&&N(!1)}),[o]),Object(m.useEffect)((function(){var t;return j.toUpper(null!==(t=null===e||void 0===e?void 0:e.type)&&void 0!==t?t:""),setTimeout((function(){I.current||N(!0)}),1e3),function(){s(!1)}}),[]),Object(m.useEffect)((function(){var t;"WEB"===d()(null!==(t=null===e||void 0===e?void 0:e.type)&&void 0!==t?t:"")&&C&&Object(c.a)((function(){console.log("requestPermissionCameraWeb success"),s(!0)}),(function(e){console.log("error",null===e||void 0===e?void 0:e.message)}))}),[C]);var F=function(){var t;if("IOS"!==j.toUpper(null!==(t=null===e||void 0===e?void 0:e.type)&&void 0!==t?t:"")){var n=B.current.getScreenshot();n&&w.push("/confirmKycFace",{imgFaceBase64:n})}},K={width:{min:.8*S},height:{min:.8*S},facingMode:"user"},U=function(){w.goBack()},P=function(){var e;return null===k||void 0===k||null===(e=k.current)||void 0===e?void 0:e.click()},W=function(e){var t,n,a,i=new FileReader;if((null===e||void 0===e||null===(t=e.target)||void 0===t||null===(n=t.files[0])||void 0===n?void 0:n.size)>42e5)return l.b.next({message:"Vui l\xf2ng ch\u1ecdn h\xecnh \u1ea3nh d\u01b0\u1edbi 4mb.",isVisible:!0}),void(e.target.value=null);i.onloadend=function(){var e=i.result;w.push("/confirmKycFace",{imgFaceBase64:e})},i.readAsDataURL(null===e||void 0===e||null===(a=e.target)||void 0===a?void 0:a.files[0])};return v.a.createElement("div",{className:"kyc"},function(){var t;return"IOS"!==j.toUpper(null!==(t=null===e||void 0===e?void 0:e.type)&&void 0!==t?t:"")?v.a.createElement("div",{className:"header"},v.a.createElement("div",{className:"headerInner row"},v.a.createElement("div",{className:"headerLeft col-2 nopadding"},v.a.createElement("div",{className:"btn-cancel",onClick:U,onKeyPress:U},v.a.createElement("img",{className:"imgBackWhite",src:E.a.iconBackWhite,alt:""}))),v.a.createElement("div",{className:"headerCenter col nopadding"}),v.a.createElement("div",{className:"headerRight col-2 nopadding"}))):null}(),function(){var t;return"IOS"!==j.toUpper(null!==(t=null===e||void 0===e?void 0:e.type)&&void 0!==t?t:"")?v.a.createElement("div",{className:"container"},v.a.createElement("div",{className:"formDescription",style:{marginBottom:20}},"Vui l\xf2ng gi\u1eef g\u01b0\u01a1ng m\u1eb7t trong khung tr\xf2n"),v.a.createElement("div",{className:"formCenter"},v.a.createElement("div",{className:"layoutCamera",style:{width:.8*S,height:.8*S,borderRadius:.8*S}},o?v.a.createElement(h.a,{audio:!1,ref:B,screenshotFormat:"image/jpeg",screenshotQuality:.6,videoConstraints:K}):null),v.a.createElement("div",{className:"layoutBorder"},v.a.createElement("div",{className:"borderWhite",style:{width:.8*S,height:.8*S,borderRadius:.8*S}},O&&(O?v.a.createElement("p",{style:{color:"white",textAlign:"center"}},"Kh\xf4ng ".concat(C?"\u0111\u01b0\u1ee3c c\u1ea5p quy\u1ec1n truy c\u1eadp":"t\xecm th\u1ea5y"," camera, vui l\xf2ng ch\u1ecdn h\xecnh.")):null)))),v.a.createElement("div",{className:"formBottom"},v.a.createElement("span",{style:{display:"flex",flex:3,justifyContent:"center",opacity:o?1:.5},onClick:o?function(){return F()}:null,onKeyPress:o?function(){return F()}:null},v.a.createElement(b.b,null)),v.a.createElement("div",{className:"layoutSelectImage",onClick:function(){return P()},onKeyPress:function(){return P()}},v.a.createElement("input",{type:"file",style:{display:"none"},src:E.a.iconImg,accept:"image/png, image/jpeg",onChange:W,ref:k}),v.a.createElement("img",{src:E.a.iconImg,alt:" "}),v.a.createElement("div",null,y.a.takePicture)))):null}())}}}]);