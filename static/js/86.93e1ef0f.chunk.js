(this.webpackJsonppaymesdk=this.webpackJsonppaymesdk||[]).push([[86],{15:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var i=n(10),a=n(0);function o(){var e="undefined"!==typeof window;function t(){return{width:e?window.innerWidth:null,height:e?window.innerHeight:null}}var n=Object(a.useState)(t()),o=Object(i.a)(n,2),c=o[0],l=o[1];return Object(a.useEffect)((function(){if(e){var n=function(){l(t())};return window.addEventListener("resize",n),function(){return window.removeEventListener("resize",n)}}}),[e]),c}},204:function(e,t,n){"use strict";n.r(t),n.d(t,"accountKyc",(function(){return c}));var i=n(13),a=n(16),o=n(25);function c(e,t){return{api:function(e){return Object(o.b)("mutation Mutation($kycInput: KYCInput!) {\n    Account {\n      KYC(input: $kycInput) {\n        succeeded\n        message\n        createdAt\n      }\n    }\n  }",Object(i.a)({},e))},type:a.L.ACCOUNT_KYC,payload:e,callback:t}}},205:function(e,t,n){"use strict";n.r(t),n.d(t,"uploadFile",(function(){return o}));var i=n(25),a=n(16);function o(e,t){return{api:function(e){return Object(i.a)(e)},type:a.K.UPLOAD_FILE,showLoading:!0,payload:e,callback:t}}},844:function(e,t,n){"use strict";n.r(t);var i=n(19),a=n(20),o=n(21),c=n(15),l=n(26),r=n.n(l),u=n(0),d=n.n(u),s=n(9),v=n(75),p=n(18),f=n(204),g=n(205),b=n(16),m=n(52),h=n(22);t.default=function(){var e,t,n=Object(v.useHistory)(),l=Object(v.useLocation)(),u=null===(e=l.state)||void 0===e?void 0:e.video,y=null===(t=l.state)||void 0===t?void 0:t.path,k=Object(c.a)().height,O=Object(s.c)((function(e){var t;return null===e||void 0===e||null===(t=e.sk)||void 0===t?void 0:t.partner})),j=Object(s.b)(),w=Object(p.bindActionCreators)(f,j),E=Object(p.bindActionCreators)(g,j),C=Object(s.c)((function(e){var t;return null===e||void 0===e||null===(t=e.sk)||void 0===t?void 0:t.clientId})),A=Object(s.c)((function(e){var t;return null===e||void 0===e||null===(t=e.sk)||void 0===t?void 0:t.kyc})),K=Object(s.c)((function(e){var t;return null===e||void 0===e||null===(t=e.sk)||void 0===t?void 0:t.env})),L=Object(h.b)(),I=function(e){for(var t=e.split(","),n=t[0].indexOf("base64")>=0?atob(t[1]):decodeURI(t[1]),i=t[0].split(":")[1].split(";")[0],a=new Uint8Array(n.length),o=0;o<n.length;o++)a[o]=n.charCodeAt(o);return new Blob([a],{type:i})};return d.a.createElement("div",{className:"confirmKYC",style:{height:k-48-L,overflow:"auto"}},d.a.createElement("div",{className:"container",style:{marginTop:0,height:k-48-L-70,overflow:"auto"}},d.a.createElement("video",{width:"100%",controls:!0,preload:"metadata",muted:!0},d.a.createElement("source",{src:y?function(e){return("production"!==K||"staging"!==K?"https://sbx-static.payme.vn":"https://static.payme.vn")+e}(y):URL.createObjectURL(u),type:"video/mp4"})),d.a.createElement("label",{style:{marginTop:20}},"Vui l\xf2ng x\xe1c nh\u1eadn video \u0111\xe3 r\xf5 n\xe9t, g\u01b0\u01a1ng m\u1eb7t v\xe0 gi\u1ea5y t\u1edd t\xf9y th\xe2n c\u1ee7a b\u1ea1n \u0111\xe3 c\xf3 trong khung h\xecnh.")),d.a.createElement("div",{className:"layoutBottom"},d.a.createElement(i.a,{label:"L\xe0m l\u1ea1i",variant:"active",onClick:function(){var e;if("EXPO"===r()(null!==(e=null===O||void 0===O?void 0:O.type)&&void 0!==e?e:""))return o.b.next({type:"onKyc",kycMode:"kycVideo"}),void n.goBack();n.goBack()}}),d.a.createElement(i.a,{label:"Ho\xe0n t\u1ea5t",variant:"active",onClick:function(){return function(){n.push("/processingLoading");var e=null!==A&&void 0!==A?A:{},t=e.identifyType,i=e.imgFront,o=e.imgBack,c=e.imgFace,l=null,r=null,d=null,s=null;y||(l=u),i&&(r=I(i)),o&&(d=I(o)),c&&(s=I(c));var v=new FormData;if(y||v.append("files",l,"video.mp4"),i&&v.append("files",r,"imgFront.jpg"),o&&v.append("files",d,"imgBack.jpg"),c&&v.append("files",s,"imgFace.jpg"),0===v.getAll("files").length){var p={clientId:C,video:y};w.accountKyc({kycInput:p},(function(e,t){var i,a;e?(j({type:b.g}),m.b.next({message:null===t||void 0===t||null===(i=t.Account)||void 0===i||null===(a=i.KYC)||void 0===a?void 0:a.message,isVisible:!0,ver:"2",title:""}),n.push("/")):n.push("/")}))}else E.uploadFile(v,(function(e,i){if(e){var l={clientId:C,video:null!==y&&void 0!==y?y:i[0].path};t&&(l.identifyType=t,l.image={front:i[y?0:1].path},o&&(l.image={front:i[y?0:1].path,back:i[y?1:2].path})),c&&(l.face=i[y?2:3].path),w.accountKyc({kycInput:l},(function(e,t){var i,a;e?(j({type:b.g}),m.b.next({message:null===t||void 0===t||null===(i=t.Account)||void 0===i||null===(a=i.KYC)||void 0===a?void 0:a.message,isVisible:!0,ver:"2",title:""}),n.push("/")):n.push("/")}))}else{var r;a.b.next({message:null!==(r=null===i||void 0===i?void 0:i.message)&&void 0!==r?r:"Error uploadFile",isVisible:!0}),n.push("/")}}))}()}})))}}}]);