(this.webpackJsonppaymesdk=this.webpackJsonppaymesdk||[]).push([[89],{186:function(t,n,e){"use strict";e.d(n,"a",(function(){return u})),e.d(n,"b",(function(){return d}));var o=e(94),i=e(43);function l(){var t=i.b.getState().sk.env;return"production"!==t||"staging"!==t}function a(){return i.b.getState().ud.kyc.state===o.c.APPROVED}function c(){switch(i.b.getState().sk.env){case"sandbox":return"sbx-";case"staging":return"s";case"production":return"";case"dev":return"dev-";default:return""}}var u=function(t,n){var e=i.b.getState().ud.accountInfo,o=l()?"https://sbx-static.payme.vn":"https://static.payme.vn",u=l()?"/2020/10/16/rcb6vHeM2.png":"/2020/10/16/d9ks87pp2.png",d=l()?"/2020/10/16/6D4PKqvmF.png":"/2020/10/16/Yop5s5cEx.png",s=l()?"/2020/10/16/UzxVp1vQW.png":"/2020/10/16/CZHouBZLq.png";return t&&a()?(console.log("isKYC",a()),console.log("accountInfo",e),(null===e||void 0===e?void 0:e.avatar)?"https://".concat(c(),"ae.payme.vn/v1/account/avatar/").concat(t).concat(n?"?w=".concat(n,"&h=").concat(n):""):"MALE"===(null===e||void 0===e?void 0:e.gender)?o+d:o+s):o+u},d=function(t,n){var e=null===t||void 0===t?void 0:t.accountId,o=null===t||void 0===t?void 0:t.isKYC,i=l()?"https://sbx-static.payme.vn":"https://static.payme.vn",a=l()?"/2020/10/16/rcb6vHeM2.png":"/2020/10/16/d9ks87pp2.png";return e&&o?"https://".concat(c(),"ae.payme.vn/v1/account/avatar/").concat(e).concat(n?"?w=".concat(n,"&h=").concat(n):""):i+a}},48:function(t,n,e){"use strict";e.d(n,"a",(function(){return c}));var o=e(13),i=e(10),l=e(0),a=e.n(l),c=Object(l.forwardRef)((function(t,n){var e=t.placeholder,c=t.autoComplete,u=t.haveTitle,d=t.titleRight,s=t.title,v=t.autoFocus,r=t.isFilledCell,p=t.styleInput,m=Object(l.useState)(""),f=Object(i.a)(m,2),g=f[0],b=f[1],h=Object(l.useRef)(null);Object(l.useImperativeHandle)(n,(function(){return{password:function(){return g},clear:function(){b("")},blur:function(){document.getElementById("input").blur()},focus:function(){document.getElementById("input").focus()}}})),Object(l.useEffect)((function(){g.length>0&&(6===g.length?(document.getElementById("input").blur(),r(!0)):r(!1))}),[g]);var y=Object(o.a)(Object(o.a)({},{width:"100%"}),p);return a.a.createElement("div",{className:"passwordContainer",style:{alignItems:d?"flex-start":"center"}},u&&a.a.createElement("p",{className:"textPasswordInput",style:{marginLeft:d?16:0}},s),a.a.createElement("form",{onSubmit:function(t){t.preventDefault(),t.stopPropagation()},style:y,autoComplete:"new-password"},a.a.createElement("input",{placeholder:e,autoComplete:null!==c&&void 0!==c?c:"off",autoCorrect:"off",autoFocus:v,id:"input",type:"password",ref:h,className:"otpInputText",pattern:"[0-9]*",inputMode:"numeric",maxLength:"6",value:g,onChange:function(t){var n=t.target.validity.valid?t.target.value:g;b(n)}})))}))},868:function(t,n,e){"use strict";e.r(n);var o=e(10),i=e(0),l=e.n(i),a=e(9),c=e(75),u=e(18),d=e(97),s=e.n(d),v=e(328),r=e(21),p=e(26),m=e.n(p),f=e(48),g=e(36),b=e(94),h=e(20),y=e(54),O=e(186),E=e(16),k=e(69),I=e(159);n.default=function(){var t,n,e=Object(c.useLocation)(),d=Object(c.useHistory)(),p=Object(i.useState)(!1),x=Object(o.a)(p,2),A=x[0],C=x[1],j=Object(i.useRef)(null),P=Object(a.b)(),S=Object(u.bindActionCreators)(g,P),w=Object(a.c)((function(t){var n;return null===t||void 0===t||null===(n=t.ud)||void 0===n?void 0:n.handShake})),T=Object(a.c)((function(t){var n;return null===t||void 0===t||null===(n=t.sk)||void 0===n?void 0:n.clientId})),N=Object(a.c)((function(t){var n;return null===(n=t.sk)||void 0===n?void 0:n.partner})),V=Object(a.c)((function(t){var n;return null===t||void 0===t||null===(n=t.ud)||void 0===n?void 0:n.appEnv})),L=null===e||void 0===e||null===(t=e.state)||void 0===t?void 0:t.phone,R=null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.accountId;return Object(i.useEffect)((function(){var t;A&&S.login({handShake:w,password:s()(null===j||void 0===j||null===(t=j.current)||void 0===t?void 0:t.password()).toString(),clientId:T,phone:L},(function(t,n){var e,o,i,l;if(t)if(null===n||void 0===n||null===(e=n.Account)||void 0===e||null===(o=e.Login)||void 0===o?void 0:o.succeeded){var a,c,u={type:I.a.RELOGIN,data:{handShake:w,accessToken:null===n||void 0===n||null===(a=n.Account)||void 0===a||null===(c=a.Login)||void 0===c?void 0:c.accessToken,accountStatus:k.a.NOT_ACTIVATED,phone:L}};S.findAccount({accountPhone:L},(function(t,e){if(t){var o,i,l,a,c,s,v,p,f,g,b,O,I;if("WEB"===m()(null!==(o=null===N||void 0===N?void 0:N.type)&&void 0!==o?o:"")||"EXPO"===m()(null!==(i=null===N||void 0===N?void 0:N.type)&&void 0!==i?i:""))(null===e||void 0===e||null===(c=e.Account)||void 0===c?void 0:c.kyc)&&(null===e||void 0===e||null===(s=e.Account)||void 0===s||null===(v=s.kyc)||void 0===v?void 0:v.kycId)&&"APPROVED"===(null===e||void 0===e||null===(p=e.Account)||void 0===p||null===(f=p.kyc)||void 0===f?void 0:f.state)?u.data.accountStatus=k.a.KYC_APPROVED:u.data.accountStatus=k.a.NOT_KYC,r.b.next(u);if(null===n||void 0===n||null===(l=n.Account)||void 0===l||null===(a=l.Login)||void 0===a?void 0:a.state)j.current.clear(),j.current.blur(),h.b.next({message:"Login l\u1ed7i. State: ".concat(null===n||void 0===n||null===(g=n.Account)||void 0===g||null===(b=g.Login)||void 0===b?void 0:b.state),isVisible:!0});else if(r.b.next({type:"onCommunicate",actions:"onRegisterSuccess",data:y.a.getInit()}),null===e||void 0===e||null===(O=e.Account)||void 0===O||null===(I=O.kyc)||void 0===I?void 0:I.state)P({type:E.y,payload:!0}),d.push("/");else{var x=y.a.getKycMode();!function(t){var n;if("SANDBOX"===V)return h.b.next({message:"Ch\u1ee9c n\u0103ng ch\u1ec9 c\xf3 th\u1ec3 thao t\xe1c m\xf4i tr\u01b0\u1eddng production",isVisible:!0}),void d.replace("/");d.replace("/"),"EXPO"!==m()(null!==(n=null===N||void 0===N?void 0:N.type)&&void 0!==n?n:"")&&r.b.next({type:"onKyc",actions:"onKyc",data:t})}({kycVideo:null===x||void 0===x?void 0:x.kycVideo,kycIdentifyImg:null===x||void 0===x?void 0:x.identifyImg,kycFace:null===x||void 0===x?void 0:x.faceImg})}}else{var A,C;"WEB"!==m()(null!==(A=null===N||void 0===N?void 0:N.type)&&void 0!==A?A:"")&&"EXPO"!==m()(null!==(C=null===N||void 0===N?void 0:N.type)&&void 0!==C?C:"")||r.b.next(u),d.push("/"),h.b.next({message:"Find Account Error",isVisible:!0})}}))}else if((null===n||void 0===n||null===(i=n.Account)||void 0===i||null===(l=i.Login)||void 0===l?void 0:l.state)===b.d.LOGIN_REQUIRE_VERIFY_OTP)S.trustDeviceOTP({clientId:T,phone:L},(function(t,n){var e,o,i,l,a,c,u,v,r,p;t?(null===n||void 0===n||null===(e=n.Account)||void 0===e||null===(o=e.TrustDevice)||void 0===o||null===(i=o.SendOTP)||void 0===i?void 0:i.succeeded)?d.push("/confirm",{phone:L,password:s()(null===j||void 0===j||null===(l=j.current)||void 0===l?void 0:l.password()).toString(),haveTrustDevice:!0}):h.b.next({message:null!==(a=null===n||void 0===n||null===(c=n.Account)||void 0===c||null===(u=c.TrustDevice)||void 0===u||null===(v=u.SendOTP)||void 0===v?void 0:v.message)&&void 0!==a?a:"C\xf3 l\u1ed7i t\u1eeb m\xe1y ch\u1ee7 h\u1ec7 th\u1ed1ng",isVisible:!0}):(j.current.clear(),j.current.blur(),h.b.next({message:null!==(r=null===n||void 0===n||null===(p=n[0])||void 0===p?void 0:p.message)&&void 0!==r?r:"C\xf3 l\u1ed7i t\u1eeb m\xe1y ch\u1ee7 h\u1ec7 th\u1ed1ng",isVisible:!0}))}));else{var v,p,f;j.current.clear(),j.current.blur(),h.b.next({message:null!==(v=null===n||void 0===n||null===(p=n.Account)||void 0===p||null===(f=p.Login)||void 0===f?void 0:f.message)&&void 0!==v?v:"C\xf3 l\u1ed7i t\u1eeb m\xe1y ch\u1ee7 h\u1ec7 th\u1ed1ng",isVisible:!0})}}))}),[A]),l.a.createElement("div",{className:"loginContainer"},l.a.createElement("div",{className:"information"},l.a.createElement("img",{src:Object(O.a)(R,!0),alt:"#",className:"avatar"}),l.a.createElement("p",{className:"phone font-medium"},L),l.a.createElement("p",{className:"text"},"Vui l\xf2ng nh\u1eadp m\u1eadt kh\u1ea9u \u0111\u1ec3 x\xe1c nh\u1eadn li\xean k\u1ebft t\xe0i kho\u1ea3n v\xed PayME")),l.a.createElement("div",{className:"inputOTP"},l.a.createElement(f.a,{ref:j,autoFocus:!0,placeholder:"Nh\u1eadp m\u1eadt kh\u1ea9u v\xed PayME",isFilledCell:function(t){C(t)}})),l.a.createElement(v.PopupboxContainer,null))}}}]);