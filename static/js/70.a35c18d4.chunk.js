(this.webpackJsonppaymesdk=this.webpackJsonppaymesdk||[]).push([[70],{15:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var a=t(10),o=t(0);function c(){var e="undefined"!==typeof window;function n(){return{width:e?window.innerWidth:null,height:e?window.innerHeight:null}}var t=Object(o.useState)(n()),c=Object(a.a)(t,2),i=c[0],r=c[1];return Object(o.useEffect)((function(){if(e){var t=function(){r(n())};return window.addEventListener("resize",t),function(){return window.removeEventListener("resize",t)}}}),[e]),i}},185:function(e,n,t){"use strict";t.d(n,"a",(function(){return c}));var a=t(10),o=t(0),c=function(){var e=Object(o.useState)({list:[],hasCamera:!1}),n=Object(a.a)(e,2),t=n[0],c=n[1];return Object(o.useEffect)((function(){try{navigator.mediaDevices.enumerateDevices().then((function(e){return e.filter((function(e){return"videoinput"===e.kind}))})).then((function(e){return c({list:e,hasCamera:0!==e.length})}))}catch(n){var e;console.log(null!==(e=null===n||void 0===n?void 0:n.message)&&void 0!==e?e:"error useMediaDevicesVideo")}}),[]),t}},23:function(e,n,t){"use strict";t.d(n,"a",(function(){return d}));var a=t(0),o=t.n(a),c=t(75),i=t(11),r=t(21),d=function(e){var n,t,a=e.actions,d=e.customAction,l=e.iconBackBlack,s=void 0!==l&&l,u=e.backToCloseSDK,m=Object(c.useHistory)(),p=Object(c.useLocation)(),v=u||null!==(n=null===p||void 0===p||null===(t=p.state)||void 0===t?void 0:t.backToCloseSDK)&&void 0!==n&&n,b=function(){var e;if(v)return localStorage.clear(),void r.b.next({type:"onClose"});d?d():(null===p||void 0===p||null===(e=p.state)||void 0===e?void 0:e.goBack)&&"/linkbank"===(null===p||void 0===p?void 0:p.pathname)?m.goBack():"home"===a?m.replace("/"):"profile"===a?m.push("/profilePersonal"):m.goBack()};return o.a.createElement("div",{className:"d-block px-2 cursor-pointer",onClick:b,onKeyPress:b},o.a.createElement("img",{width:32,height:32,src:s?i.b.iconBackBlack:i.b.iconBackWhite,alt:""}))}},30:function(e,n,t){"use strict";t.r(n),t.d(n,"paymentWithDraw",(function(){return i})),t.d(n,"paymentDeposit",(function(){return r})),t.d(n,"getSecurityCode",(function(){return d})),t.d(n,"detectDataQRCode",(function(){return l})),t.d(n,"getFee",(function(){return s})),t.d(n,"getTransactionInfo",(function(){return u}));var a=t(13),o=t(16),c=t(25);function i(e,n){return{api:function(e){return Object(c.b)("mutation WalletMutation($withdrawInput: WalletWithdrawInput) {\n    Wallet {\n      Withdraw(input: $withdrawInput) {\n        succeeded\n        message\n        history {\n          accountId\n          service {\n            transaction\n            type\n            method\n            data {\n              ... on WithdrawObject {\n                WithdrawObjectDetails: details {\n                  state\n                  amount\n                  total\n                  fee\n                  description\n                  transaction\n                }\n              }\n            }\n          }\n          state\n          transport{\n            method\n            description\n            details {\n              description\n            }\n          }\n          title\n          amount\n          fee\n          total\n          createdAt\n          publishedAt\n        }\n      }\n    }\n  }",Object(a.a)({},e))},type:o.L.PAYMENT_WITHDRAW,showLoading:!0,payload:e,callback:n}}function r(e,n){var t=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i="mutation DepositMutation($depositInput: WalletDepositInput) {\n      Wallet {\n        Deposit(input: $depositInput) {\n          succeeded\n          message\n          history {\n            accountId\n            payment {\n              method\n              description\n            }\n            service {\n              transaction\n              type\n              state\n            }\n            amount\n            fee\n            total\n            createdAt\n          }\n          payment {\n            ... on PaymentBankCardResponsed {\n              bankCardState: state\n              message\n              html\n            }\n            ... on PaymentLinkedResponsed {\n              linkedId\n              transaction\n              html\n              message\n              linkedState: state\n            }\n            ... on PaymentBankTransferResponsed {\n              bankTranferState: state\n              message\n              bankList {\n                bankName\n                bankCity\n                bankBranch\n                bankAccountName\n                bankAccountNumber\n                content\n                swiftCode\n                qrContent\n                vietQRAccepted\n              }\n              paymentInfo {\n                id\n                amount\n              }\n            }\n            ... on PaymentCreditCardResponsed {\n              creditCardState: state\n              message\n              transaction\n            }\n          }\n        }\n      }\n    }";return{api:function(e){return Object(c.b)(i,Object(a.a)({},e))},type:o.L.PAYMENT_DEPOSIT,showLoading:t,payload:e,callback:n}}function d(e,n){return{api:function(e){return Object(c.b)("mutation Mutation($securityCode: CreateSecurityCodeByPassword!) {\n    Account {\n      SecurityCode {\n        CreateCodeByPassword(input: $securityCode) {\n          securityCode\n          succeeded\n          message\n        }\n      }\n    }\n  }",Object(a.a)({},e))},type:o.L.GET_SECURITY_CODE,showLoading:!0,payload:e,callback:n}}function l(e,n){return{api:function(e){return Object(c.b)("mutation DetectDataQRCode($input: OpenEWalletPaymentDetectInput!) {\n    OpenEWallet {\n      Payment {\n        Detect (input: $input) {\n          succeeded\n          message\n          type\n          storeId\n          action\n          amount\n          note\n          orderId\n        }\n      }\n    }\n  }",Object(a.a)({},e))},type:o.L.DETECT_QR_CODE,showLoading:!0,payload:e,callback:n}}function s(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i="mutation Mutation($getFeeInput: GetFeeInput) {\n    Utility {\n      GetFee(input: $getFeeInput) {\n        succeeded\n        message\n        state\n        fee {\n          ... on GeneralFee {\n            fee\n          }\n          ... on AdvanceMoneyFee {\n            advanceMoneyFee: fee\n            amount\n            total\n            interestFee\n            availableBalance\n          }\n        }\n        \n      }\n    }\n  }";return{api:function(e){return Object(c.b)(i,Object(a.a)({},e),t)},type:o.L.GET_FEE,showLoading:!0,payload:e,callback:n}}function u(e,n){var t=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],r="mutation Mutation($getTransactionInfoInput: GetTransactionInfoInput!) {\n    OpenEWallet {\n      Payment {\n        GetTransactionInfo(input: $getTransactionInfoInput) {\n          succeeded\n          message\n          transaction\n          storeName\n          reason\n          amount\n          state\n          total\n          fee\n          description\n          updatedAt\n          createdAt\n          payment {\n            state\n            description\n            transaction\n            method\n            details {\n              transaction\n              methodData {\n                ... on PaymentWalletObject {\n                  paymentWalletId\n                }\n                ... on PaymentBankCardObject {\n                  paymentBankCardId\n                  bankInfo {\n                    swiftCode\n                    cardNumber\n                    cardHolder\n                    bankAccountNumber\n                    bankAccountName\n                    issuedDate\n                  }\n                }\n                ... on PaymentBankAccountObject {\n                  paymentBankAccountId\n                  bankInfo {\n                    swiftCode\n                    cardNumber\n                    cardHolder\n                    bankAccountNumber\n                    bankAccountName\n                    issuedDate\n                  }\n                }\n                ... on PaymentBankCardPGObject {\n                  paymentBankCardPGId\n                  issuedDate\n                  cardHolder\n                  cardNumber\n                }\n                ... on PaymentLinkedObject {\n                  paymentLinkedId\n                  linkedId\n                  bankInfo {\n                    swiftCode\n                    cardNumber\n                    cardHolder\n                    bankAccountNumber\n                    bankAccountName\n                    issuedDate\n                  }\n                }\n                ... on PaymentCreditCardObject {\n                  paymentCreditCardId\n                  cardInfo {\n                    cardNumber\n                    expiredAt\n                    cvv\n                  }\n                }\n                ... on PaymeCreditPaymentObject {\n                  paymeCreditId\n                  credit {\n                    used\n                    remain\n                  }\n                }\n                ... on PaymentBankCardPGObject {\n                  paymentBankCardPGId\n                  issuedDate\n                  cardHolder\n                  cardNumber\n                }\n                ... on PaymentMoMoPGObject {\n                  paymentMoMoId\n                  qrContent\n                }\n                ... on PaymentZaloPayPGObject {\n                  paymentZaloPayId\n                  qrContent\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }";return{api:function(e){return Object(c.b)(r,Object(a.a)({},e),t)},type:o.L.GET_TRANSACTION_INFO,showLoading:i,payload:e,callback:n}}},929:function(e,n,t){"use strict";t.r(n);var a=t(10),o=t(0),c=t.n(o),i=t(813),r=t.n(i),d=t(9),l=t(18),s=t(23),u=t(20),m=t(15),p=t(11),v=t(30),b=t(75),f=t(185),y=t(21),g=t(69),h=t(19);function C(e){var n=e.onClose,t=function(){n&&n()};return c.a.createElement("div",{className:"ScanQRENotFound"},c.a.createElement("div",{className:"ScanQRENotFound-layout"},c.a.createElement("div",{className:"ScanQRENotFound-layout-Header"},c.a.createElement("div",{onClick:t},c.a.createElement("img",{alt:"#",src:p.b.iconClose}))),c.a.createElement("div",{className:"ScanQRENotFound-layout-Body",style:{alignItems:"center"}},c.a.createElement("img",{alt:"#",className:"imgQrCodeNotFound",src:p.b.imgQrCodeNotFound,style:{width:128}}),c.a.createElement("label",{className:"titleNotFound font-bold"},"Kh\xf4ng t\xecm th\u1ea5y"),c.a.createElement("label",{className:"messageNotFound"},"QRCode kh\xf4ng \u0111\xfang \u0111\u1ecbnh d\u1ea1ng ho\u1eb7c kh\xf4ng t\u1ed3n t\u1ea1i. Vui l\xf2ng ki\u1ec3m tra v\xe0 qu\xe9t l\u1ea1i"),c.a.createElement(h.a,{label:"\u0110\xf3ng",variant:"active",onClick:t,propStyle:{width:"100%"}}))))}n.default=function(){var e,n,t,i=Object(m.a)().width,h=Object(b.useHistory)(),E=Object(b.useLocation)(),k=Object(d.b)(),I=Object(d.c)((function(e){var n;return null===e||void 0===e||null===(n=e.sk)||void 0===n?void 0:n.clientId})),N=Object(l.bindActionCreators)(v,k),O=null!==(e=null===(n=E.state)||void 0===n?void 0:n.isFromPartnerSDK)&&void 0!==e&&e,j=null===(t=E.state)||void 0===t?void 0:t.payCode,w=Object(o.useRef)(null),P=Object(o.useRef)(null),D=Object(o.useState)(!1),S=Object(a.a)(D,2),A=S[0],R=S[1],B=Object(o.useState)(!1),F=Object(a.a)(B,2),T=F[0],L=F[1],W=Object(f.a)().hasCamera;Object(o.useEffect)((function(){y.b.next({type:"scanQR",data:{status:!0,message:"onSuccess"}}),y.b.next({type:g.c.SCAN_QR_CODE,message:"Th\xe0nh c\xf4ng"})}),[]);var Q=function(){P.current.openImageDialog()},M=function(e){console.log("[PAYMESDK] - error scan",e),L(!1)};return c.a.createElement("div",{className:"scanQR"},c.a.createElement(r.a,{ref:w,className:"readerCamera",delay:300,onLoad:function(){L(!0)},onError:M,facingMode:"environment",onScan:function(e){if(e){var n={clientId:I,qrContent:e};N.detectDataQRCode({input:n},(function(e,n){if(e){var t,a,o,c=null!==(t=null===n||void 0===n||null===(a=n.OpenEWallet)||void 0===a||null===(o=a.Payment)||void 0===o?void 0:o.Detect)&&void 0!==t?t:{};if(c.succeeded){var i={clientId:I,amount:null===c||void 0===c?void 0:c.amount,storeId:null===c||void 0===c?void 0:c.storeId,orderId:null===c||void 0===c?void 0:c.orderId,note:null===c||void 0===c?void 0:c.note,payCode:j,isFromPartnerSDK:O};h.replace("/pay",{payParam:i})}else u.b.next({message:c.message,isVisible:!0})}else R(!0)}))}},showViewFinder:!1,legacyMode:!1}),c.a.createElement(r.a,{ref:P,className:"QrReaderRefImage",delay:300,onError:M,facingMode:"environment",onScan:function(e){if(e){var n={clientId:I,qrContent:e};N.detectDataQRCode({input:n},(function(e,n){if(e){var t,a,o,c=null!==(t=null===n||void 0===n||null===(a=n.OpenEWallet)||void 0===a||null===(o=a.Payment)||void 0===o?void 0:o.Detect)&&void 0!==t?t:{};if(c.succeeded){var i={clientId:I,amount:null===c||void 0===c?void 0:c.amount,storeId:null===c||void 0===c?void 0:c.storeId,orderId:null===c||void 0===c?void 0:c.orderId,note:null===c||void 0===c?void 0:c.note,payCode:j,isFromPartnerSDK:O};h.replace("/pay",{payParam:i})}else u.b.next({message:c.message,isVisible:!0})}else u.b.next({message:null!==n&&void 0!==n?n:"C\xf3 l\u1ed7i t\u1eeb m\xe1y ch\u1ee7 h\u1ec7 th\u1ed1ng",isVisible:!0})}))}else R(!0)},showViewFinder:!1,legacyMode:!0}),c.a.createElement("div",{className:"header"},c.a.createElement("div",{className:"headerInner row"},c.a.createElement("div",{className:"headerLeft col-2 nopadding"},c.a.createElement(s.a,{backToCloseSDK:O})),c.a.createElement("div",{className:"headerCenter col nopadding"},c.a.createElement("p",{className:"headerTitle font-semibold"},"Qu\xe9t QR")),c.a.createElement("div",{className:"headerRight col-2 nopadding"}))),c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"formCenter"},T?c.a.createElement(c.a.Fragment,null,c.a.createElement("div",{className:"titleQRScan"},"Gi\u1eef m\xe3 QRCode trong khung"),c.a.createElement("div",{className:"layoutBorder"},c.a.createElement("div",{className:"borderWhite",style:{width:.7*i,height:.7*i}},c.a.createElement("div",{className:"animation"})))):c.a.createElement("div",null,c.a.createElement("p",{style:{color:"white",textAlign:"center"}},"Kh\xf4ng ".concat(W?"\u0111\u01b0\u1ee3c c\u1ea5p quy\u1ec1n truy c\u1eadp":"t\xecm th\u1ea5y"," camera, vui l\xf2ng ch\u1ecdn h\xecnh."))),c.a.createElement("div",{className:"btnContainer"},c.a.createElement("div",{className:"btnSelectImgContainer"},c.a.createElement("div",{className:"iconSelectImgOutter",onClick:Q,onKeyPress:Q},c.a.createElement("img",{className:"iconSelectImg",src:p.b.iconImg,alt:""})),c.a.createElement("p",null,"Ch\u1ecdn \u1ea3nh")))),c.a.createElement("div",{className:"formBottom"},c.a.createElement("div",{className:"layoutSelectImage"}),c.a.createElement("div",{style:{flex:1}}))),A&&c.a.createElement(C,{onClose:function(){return R(!1)}}))}}}]);