(this.webpackJsonppaymesdk=this.webpackJsonppaymesdk||[]).push([[132],{876:function(e,t,n){"use strict";n.r(t);var i=n(50),l=n(10),o=n(0),a=n.n(o),d=n(9),u=n(75),c=n(18),r=n(34),v=n.n(r),s=n(134),b=n.n(s),f=n(45),m=n(211),p=n(30),y=n(41),O=n(54),h=n(19),A=n(20),j=n(114),g=n(16),N=n(42),E=n(242),C=n(12),w=n(22),k=n(93),T=n(62),I=n(58),M=n(72),B=n(148),S=n(52),x=n(67),V=n(468),D=n(257);t.default=function(){var e=Object(w.a)(),t=Object(u.useHistory)(),n=Object(u.useLocation)(),r=Object(d.b)(),s=Object(c.bindActionCreators)(f,r),W=Object(c.bindActionCreators)(m,r),R=Object(c.bindActionCreators)(p,r),H=Object(d.c)((function(e){var t,n;return null!==(t=null===(n=e.ud)||void 0===n?void 0:n.appEnv)&&void 0!==t?t:""})),L=Object(d.c)((function(e){var t;return null===(t=e.wp)||void 0===t?void 0:t.methodSelected})),U=Object(d.c)((function(e){var t,n;return null!==(t=null===(n=e.wp)||void 0===n?void 0:n.methods)&&void 0!==t?t:[]})),_=Object(d.c)((function(e){var t;return null===(t=e.wp)||void 0===t?void 0:t.walletInfo})),P=Object(d.c)((function(e){var t;return null===(t=e.wp)||void 0===t?void 0:t.toogleBalance})),F=Object(d.c)((function(e){var t,n;return null===e||void 0===e||null===(t=e.sk)||void 0===t||null===(n=t.configColor)||void 0===n?void 0:n.mainColor})),K=Object(d.c)((function(e){var t,n,i;return null!==(t=null===(n=e.sk)||void 0===n||null===(i=n.settings)||void 0===i?void 0:i.banks)&&void 0!==t?t:[]})),G=Object(d.c)((function(e){var t;return null===e||void 0===e||null===(t=e.sk)||void 0===t?void 0:t.clientId})),z=Object(o.useState)(""),J=Object(l.a)(z,2),Q=J[0],X=J[1],Y=Object(o.useState)({}),q=Object(l.a)(Y,2),Z=q[0],$=q[1],ee=Object(o.useState)(""),te=Object(l.a)(ee,2),ne=te[0],ie=te[1],le=Object(o.useState)(Object(d.c)((function(e){var t;return null===(t=e.wp)||void 0===t?void 0:t.methodSelected}))),oe=Object(l.a)(le,2),ae=oe[0],de=oe[1],ue=Object(o.useState)(""),ce=Object(l.a)(ue,2),re=ce[0],ve=ce[1],se=Object(o.useState)(!1),be=Object(l.a)(se,2),fe=be[0],me=be[1],pe=Object(o.useState)([]),ye=Object(l.a)(pe,2),Oe=ye[0],he=ye[1],Ae=Object(o.useRef)(null);Object(o.useEffect)((function(){var e;r({type:g.k,payload:!!(null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.closeWhenDone)})}),[]),Object(o.useEffect)((function(){var e,t;(null===n||void 0===n||null===(e=n.state)||void 0===e?void 0:e.amount)&&X(Object(y.f)(null===n||void 0===n||null===(t=n.state)||void 0===t?void 0:t.amount.toString()));je();s.paymentMethod({PaymentMethodInput:{serviceType:"WITHDRAW"}},(function(e,t){var n,i,l,o,a;e&&((null===t||void 0===t||null===(n=t.Utility)||void 0===n||null===(i=n.GetPaymentMethod)||void 0===i?void 0:i.succeeded)||A.b.next({message:null!==(l=null===t||void 0===t||null===(o=t.Utility)||void 0===o||null===(a=o.GetPaymentMethod)||void 0===a?void 0:a.message)&&void 0!==l?l:C.a.messageError2,isVisible:!0}))}))}),[]),Object(o.useEffect)((function(){L&&de(L)}),[L]),Object(o.useEffect)((function(){ie(Ne())}),[Q,ae,Z,fe]);var je=function(){W.getRecentTransferBankAccount({transferMoneyClientId:G,transferMoneyTransferMoneyType:"BANK_ACCOUNT",transferMoneyPaging:{start:0,limit:5}},(function(e,t){var n,i;e&&he(null!==(n=null===t||void 0===t||null===(i=t.Recent)||void 0===i?void 0:i.transferMoney)&&void 0!==n?n:[])}))},ge=function(e){W.deleteRecentTransfer({input:{recentId:null===e||void 0===e?void 0:e.recentId}},(function(e,t){e&&(je(),console.log("-----deleteRecent",t))}))},Ne=function(){var e=Object(y.f)(Q);if(Q){if(e>O.a.getDepositLimit().max)return ve("".concat(C.a.NotiMaxMoney1," ").concat(Object(y.e)(O.a.getDepositLimit().max)," \u0111")),I.a.DISABLE;if(ve(""),(null===ae||void 0===ae?void 0:ae.type)===N.a.LINKED)return I.a.ACTIVE;var t;if(ae.type===N.a.BANK_ACCOUNT)return(null===Z||void 0===Z?void 0:Z.bankHolder)&&(null===Z||void 0===Z||null===(t=Z.bankSelected)||void 0===t?void 0:t.shortName)&&(null===Z||void 0===Z?void 0:Z.accountNumber)?I.a.ACTIVE:I.a.DISABLE;if((null===ae||void 0===ae?void 0:ae.type)===N.a.BANK_CARD&&fe)return I.a.ACTIVE}return I.a.DISABLE},Ee=function(){if("SANDBOX"!==H||"WALLET"===(null===ae||void 0===ae?void 0:ae.type)){if(Object(E.a)(ae,Object(y.a)(Q))){if(!function(){var e=Object(y.f)(Q),t=O.a.getWithdrawLimit().min,n=O.a.getWithdrawLimit().max;return e>(null===_||void 0===_?void 0:_.balance)?(A.b.next({message:C.a.NotiNotEnoughMoney1,isVisible:!0}),!1):e<t?(A.b.next({message:"".concat(C.a.NotiMinMoney1," ").concat(Object(y.e)(t)),isVisible:!0}),!1):!(e>n)||(A.b.next({message:"".concat(C.a.NotiMaxMoney1," ").concat(Object(y.e)(n)),isVisible:!0}),!1)}())return;var e=function(){var e,t,n,i,l,o,a,d,u,c;switch(null===ae||void 0===ae?void 0:ae.type){case N.a.LINKED:return{linked:{linkedId:null===ae||void 0===ae||null===(e=ae.data)||void 0===e?void 0:e.linkedId}};case N.a.BANK_ACCOUNT:return{bankAccount:{bankAccountNumber:null===Z||void 0===Z?void 0:Z.accountNumber,swiftCode:null===Z||void 0===Z||null===(t=Z.bankSelected)||void 0===t?void 0:t.swiftCode,bankAccountName:null===Z||void 0===Z?void 0:Z.bankHolder}};case N.a.BANK_CARD:return{bankCard:{cardNumber:null===(n=Ae.current)||void 0===n||null===(i=n.getValue)||void 0===i?void 0:i.call(n).cardNumber,cardHolder:null===(l=Ae.current)||void 0===l||null===(o=l.getValue)||void 0===o?void 0:o.call(l).cardHolder,swiftCode:null===(a=Ae.current)||void 0===a||null===(d=a.getValue)||void 0===d||null===(u=d.call(a))||void 0===u||null===(c=u.bankSelect)||void 0===c?void 0:c.swiftCode}};default:return{}}}(),n={serviceType:M.a.WITHDRAW,subType:null,amount:Object(y.f)(Object(y.a)(Q)),transport:e};R.getFee({getFeeInput:n},(function(e,n){var i,l,o,a,d,u,c,r,s,b,f,m,p,O;if(e)if(null===n||void 0===n||null===(i=n.Utility)||void 0===i||null===(l=i.GetFee)||void 0===l?void 0:l.succeeded){if((null===n||void 0===n||null===(o=n.Utility)||void 0===o||null===(a=o.GetFee)||void 0===a?void 0:a.state)===B.a.OVER_DAY_QUOTA||(null===n||void 0===n||null===(d=n.Utility)||void 0===d||null===(u=d.GetFee)||void 0===u?void 0:u.state)===B.a.OVER_MONTH_QUOTA)S.b.next({message:null===n||void 0===n||null===(f=n.Utility)||void 0===f||null===(m=f.GetFee)||void 0===m?void 0:m.message,title:C.a.Notification,isVisible:!0,activeButtonCloseTop:!1,listButton:[{text:"\u0110\xf3ng",style:{color:"#0caa26",fontSize:15,fontWeight:600}}]});else if(Object(E.a)(ae,null!==(c=Object(y.f)(Object(y.a)(Q))+(null===n||void 0===n||null===(r=n.Utility)||void 0===r||null===(s=r.GetFee)||void 0===s||null===(b=s.fee)||void 0===b?void 0:b.fee))&&void 0!==c?c:0)){var h,j,g;if("BANK_CARD"===(null===ae||void 0===ae?void 0:ae.type))if(v()(null===(h=Ae.current)||void 0===h||null===(j=h.getValue)||void 0===j?void 0:j.call(h).cardHolder))return void A.b.next({message:C.a.ErrorInfoATMCardDeposit,isVisible:!0});if("BANK_ACCOUNT"===(null===ae||void 0===ae?void 0:ae.type))if(!(null===Z||void 0===Z?void 0:Z.bankHolder)||!(null===Z||void 0===Z||null===(g=Z.bankSelected)||void 0===g?void 0:g.shortName)||!(null===Z||void 0===Z?void 0:Z.accountNumber))return void A.b.next({message:C.a.ErrorBankInfoWithdraw,isVisible:!0});setTimeout((function(){var e,i,l,o,a,d,u,c,r,v,s,b;t.push("/confirmWithDraw",{type:"WITHDRAW",money:Q,title:C.a.WithdrawConfirmation,method:ae,feeWithdraw:null!==(e=null===n||void 0===n||null===(i=n.Utility)||void 0===i||null===(l=i.GetFee)||void 0===l||null===(o=l.fee)||void 0===o?void 0:o.fee)&&void 0!==e?e:0,cardInfo:{cardNumber:null===(a=Ae.current)||void 0===a||null===(d=a.getValue)||void 0===d?void 0:d.call(a).cardNumber,cardHolder:null===(u=Ae.current)||void 0===u||null===(c=u.getValue)||void 0===c?void 0:c.call(u).cardHolder,swiftCode:null===(r=Ae.current)||void 0===r||null===(v=r.getValue)||void 0===v||null===(s=v.call(r))||void 0===s||null===(b=s.bankSelect)||void 0===b?void 0:b.swiftCode},bankAccount:Z})}),300)}}else A.b.next({isVisible:!0,message:null===n||void 0===n||null===(p=n.Utility)||void 0===p||null===(O=p.GetFee)||void 0===O?void 0:O.message})}))}}else A.b.next({message:C.a.messageErrorFunctionProduction,isVisible:!0})};return a.a.createElement("div",{className:"withdrawContainer"},a.a.createElement("div",{className:"withdrawInner"},a.a.createElement("div",{style:{padding:16}},a.a.createElement("div",null,a.a.createElement(D.a,{title:C.a.TitleWithdraw,eyeOpen:P,onPressEyeOpen:function(){return r({type:"TOOGLE_BALANCE"})}}),a.a.createElement(T.a,{inputWithCurrency:!0,value:Object(y.a)(Q),type:"tel",inputMode:"numeric",maxLength:12,messageError:re,placeholder:C.a.WithdrawInputMoney,onChange:function(e){var t;(null===e||void 0===e||null===(t=e.target)||void 0===t?void 0:t.value)?X(Object(y.e)(e.target.value)):X(e)},styles:{padding:"12px 16px"}})),a.a.createElement(k.a,{listMethods:[].concat(Object(i.a)(U),[{title:C.a.AddMorePaymentMethod,type:"ADD_METHOD",note:C.a.NoteAddMorePaymentMethod}]),title:C.a.TitleWithdrawMethod,titlePopup:C.a.TitleSelectWithdrawMethod,methodSelected:ae,onSelect:function(e){return de(e)}}),"BANK_CARD"===(null===ae||void 0===ae?void 0:ae.type)?a.a.createElement(j.a,{ref:Ae,typeForm:"OPEN_EWALLET",isShowImageCard:!1,onSelect:function(){return Ee()},listBank:b()(K,(function(e){return null===e||void 0===e?void 0:e.withdrawable})),serviceType:"WITHDRAW",checkActiveButton:function(e){me(e)}}):"BANK_ACCOUNT"===(null===ae||void 0===ae?void 0:ae.type)?a.a.createElement(V.a,{setBankAccount:$,dataRecentBankAccount:Oe,deleteRecent:ge}):null,a.a.createElement("div",{style:{backgroundColor:"#eff2f7",borderRadius:12},className:"px-3 py-2"},a.a.createElement("span",{style:{color:"#647081"},className:"font-size-12"},"(*) Xem chi ti\u1ebft bi\u1ec3u ph\xed giao d\u1ecbch "),a.a.createElement("span",{style:{color:F},className:"font-size-12 fw-semibold text-decoration-underline cursor-pointer",onClick:function(){x.c.next({isVisible:!0,type:x.b.PopupNotifyBottomIframeFull,data:{showClose:!0,url:"https://payme.vn/web/bieu-phi-vi-dien-tu",titleHeader:C.a.tariffPayME}})},onKeyPress:function(){x.c.next({isVisible:!0,type:x.b.PopupNotifyBottomIframeFull,data:{showClose:!0,url:"https://payme.vn/web/bieu-phi-vi-dien-tu",titleHeader:C.a.tariffPayME}})}},"t\u1ea1i \u0111\xe2y")))),a.a.createElement("div",{className:"fixBottom",style:{paddingBottom:e}},a.a.createElement(h.a,{className:"btn",label:C.a.Next,variant:ne===I.a.ACTIVE?"active":"disabled",onClick:function(){return Ee()}})))}}}]);